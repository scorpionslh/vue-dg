{"version":3,"sources":["webpack://DataGrid/webpack/universalModuleDefinition","webpack://DataGrid/webpack/bootstrap","webpack://DataGrid/./node_modules/@soda/get-current-script/index.js","webpack://DataGrid/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://DataGrid/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://DataGrid/./node_modules/tslib/tslib.es6.js","webpack://DataGrid/./src/components/Grid.ts","webpack://DataGrid/./src/components/DataColumn.ts","webpack://DataGrid/./src/DateFormat.ts","webpack://DataGrid/./src/linq.ts","webpack://DataGrid/./src/StringFormat.ts","webpack://DataGrid/./src/NumberFormat.ts","webpack://DataGrid/./src/Config.ts","webpack://DataGrid/./src/DataSource.ts","webpack://DataGrid/./src/components/NumericInput.ts","webpack://DataGrid/./src/components/CalendarDisplay.ts","webpack://DataGrid/./src/components/Pager.ts","webpack://DataGrid/./src/components/PageList.ts","webpack://DataGrid/./src/components/Checkbox.ts","webpack://DataGrid/./src/components/BoolFilter.ts","webpack://DataGrid/./src/components/ScrollPanel.ts","webpack://DataGrid/./src/components/TimeDisplay.ts","webpack://DataGrid/./src/components/DatePicker.ts","webpack://DataGrid/./src/components/FocusInput.ts","webpack://DataGrid/./src/components/DateFilter.ts","webpack://DataGrid/./src/components/DateTimeFilter.ts","webpack://DataGrid/./src/components/ValueListFilter.ts","webpack://DataGrid/./src/components/NumericFilter.ts","webpack://DataGrid/./src/components/TextFilter.ts","webpack://DataGrid/./src/components/FilterPopup.ts","webpack://DataGrid/./src/components/TriCheckbox.ts","webpack://DataGrid/./src/Normalization.ts","webpack://DataGrid/./src/components/FilterField.ts","webpack://DataGrid/./src/components/DataGrid.ts","webpack://DataGrid/./src/components/FilterGroup.ts","webpack://DataGrid/./src/components/GroupField.ts","webpack://DataGrid/./src/OData.ts","webpack://DataGrid/./src/KendoMvc.ts","webpack://DataGrid/./src/i18n/pl-PL.ts","webpack://DataGrid/./src/i18n/pt-BR.ts","webpack://DataGrid/./src/index.ts","webpack://DataGrid/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__8bbf__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getCurrentScript","descriptor","getOwnPropertyDescriptor","document","currentScript","Error","err","pageSource","inlineScriptSourceRegExp","inlineScriptSource","ieStackRegExp","ffStackRegExp","stackDetails","exec","stack","scriptLocation","line","currentLocation","location","href","replace","hash","scripts","getElementsByTagName","documentElement","outerHTML","RegExp","trim","length","readyState","src","innerHTML","window","match","__spreadArrays","il","arguments","Array","k","a","j","jl","cast","data","TokenKind","DataColumn","extend","props","title","type","String","template","headTemplate","sortOrder","Number","sortDir","default","field","sortable","Boolean","render","filter","width","values","icon","formatOptions","h","items","toList","select","selector","Enumerable","map","take","count","result","push","where","predicate","forEach","orderBy","sort","b","keyA","keyB","selectMany","concat","other","groupSorted","keysSelector","arraysEqual","first","second","groupKey","item","currentKey","groupBy","keySelector","lookup","keys","all","zip","sum","any","firstOrDefault","find","chain","range","start","leftPad","text","placeholder","substr","TokenType","dateParts","token","formatter","getFullYear","setter","v","year","kind","Year","getMonth","month","Month","getDate","day","Day","getHours","hour","Hour","getMinutes","minute","Minute","getSeconds","Second","tokenize","format","entry","dateLookup","startsWith","undefined","DatePart","part","last","Const","today","Date","findLayout","formatDate","date","join","positionKind","position","input","test","nearestInputIndex","Math","max","nextBounadry","previousBoundary","end","tokens","tryParse","parts","datePart","tokenValue","parseInt","unformat","decimal","regex","parseFloat","isNaN","checkPrecision","val","base","round","abs","toFixed","precision","exponentialForm","rounded","formatNumber","thousand","raw","usePrecision","negative","mod","split","types","i18n","yes","no","pagerPage","pagerOfPages","firstPage","previousPage","nextPage","lastPage","pageListItemTitle","filterAccept","filterReset","dropdownLabel","rangeFrom","rangeTo","containsValue","startsWithValue","endsWithValue","valueNotEqual","valueEqual","labelValueEquals","calendarSettings","dateFormat","datePlaceholder","timeFormat","timePlaceholder","dateTimeFormat","dateTimePlaceholder","dayNames","monthNamesFull","monthNamesShort","weekStart","yearFormat","yearRangeFormat","monthFormat","monthFirst","setLocale","locale","setSettings","settings","setCalendar","calendar","setLanguage","getCalendar","target","getOwnPropertyNames","prop","FilterOperator","SortDirection","idField","thousandSeparator","decimalPrecision","decimalSeparator","ignoreDateOffset","defaultRemoteSource","getSettings","lang","addType","definition","filterComponent","filterParams","getFormatter","typeName","defaultFormatter","candidate","getFilterComponent","component","params","localize","setFilterComponent","normailzeDate","charAt","separator","decimalFormatter","options","resolver","onSuccess","onError","onAlways","success","callback","error","always","fetch","sources","addSource","xhrHooks","addXhrHook","hook","normalize","isArray","addRemoteSource","url","load","request","urlSet","xhr","XMLHttpRequest","onreadystatechange","DONE","status","JSON","parse","responseText","total","dataUrl","pageUrl","open","send","source","sourceType","emptySource","builder","arraySource","_","operatorOrDefault","operator","Equals","isRowMatching","row","NotEqals","Contains","indexOf","StartsWith","EndsWith","endsWith","GraterThanOrEqual","GreaterThan","LowerThan","LowerThanOrEqual","In","message","isMatching","filters","group","copy","slice","sorting","isLower","direction","page","pageSize","validKeys","Mode","float","buffer","methods","formatValue","emitValue","newValue","$emit","attrs","domProps","on","keydown","e","ctrlKey","blur","stopPropagation","preventDefault","computed","pageCount","ceil","workingSize","class","style","components","NumericInput","buildRange","splice","pageLinks","click","links","linkNodes","disabled","label","checked","fieldName","trueFilter","falseFilter","withTrue","withFalse","newFilters","emit","Checkbox","editValue","switchMode","selectedTime","getTime","renderDays","layout","monthStart","monthEnd","startDay","getDay","fromPrev","fromNext","dayCount","cells","current","isSelected","setHours","setMinutes","setSeconds","cssClass","buildHeader","renderLinkOrNull","css","onClick","linksPrev","onFirst","onPrev","linksNext","onNext","onLast","action","daysHeader","head","reverse","monthsHeader","yearsHeader","from","to","renderMonths","renderYears","daysSubHeader","modes","body","header","subHeader","findRoot","classList","contains","parentElement","vOffset","mounted","watch","wheel","deltaY","directives","valueAdjust","$slots","mousedown","button","endHandler","content","querySelector","bar","containerHeight","clientHeight","maxContentOffset","startPos","pageY","startOffset","maxBarOffset","moveHandler","ev","stopImmediatePropagation","delta","percent","removeEventListener","addEventListener","BarMargin","el","binding","contentOffset","offset","marginTop","ContentMargin","maxOffset","min","offsets","snapItems","$el","itemSize","getCurrent","renderValue","actual","floor","clamped","ScrollPanel","replacePart","index","editIndex","popupValue","clickListener","popupVisible","CustomEvent","detail","sender","CalendarDisplay","TimeDisplay","dispatchEvent","textInput","selectionStart","selectionEnd","dgFocus","focus","$nextTick","specialIndex","canBePlaced","isNumber","newIndex","nextIndex","tokenKind","isTime","accept","inserted","tagName","toLowerCase","Event","cancelable","DatePicker","fromFilter","tag","toFilter","setDate","setMilliseconds","selected","nameLookup","normalized","filterValues","renderTag","availableOptions","change","dropDown","newValues","selectedIndex","setTimeout","equalsFilter","equals","filterValue","filterOperator","findIndex","filterOptions","mouseDownListener","opened","closeListener","keyListener","workingValue","bindEvents","beforeDestroy","unbindEvents","submit","display","adjustSide","minOffset","clientWidth","box","getBoundingClientRect","add","innerWidth","left","BoolFilter","DateFilter","NumericFilter","DateTimeFilter","TextFilter","ValueListFilter","indeterminate","normalizeSorting","normalizeField","Asc","withCheck","check","isSortingEqual","areFilterValuesEqual","areFilterGroupsEqual","areFiltersEqual","firstLookup","groups","SelectionMode","FilterField","getValue","notifyParent","handler","$parent","onValueSignaled","FilterGroup","$children","$options","GroupField","order","logError","config","silent","console","buildSourceOrDefault","ODataVersion","vPage","vFetchId","vDataSource","vPageData","vSorting","vTotal","vColumnFilters","columnFilters","vSelectedIds","selectedIds","vExpanded","vIsLoading","vReloadHandler","vUri","vPageUri","selectionMode","None","resetSelection","findColumns","Desc","switchPage","bindReload","reloadEvent","sourceArgs","oldValue","soureOptions","Single","fetchSource","isLoading","pageable","filterable","keepSelection","checkboxes","canReload","uri","pageUri","rowClass","Function","detailsTemplate","noDataTemplate","fieldInfos","theme","groupTemplate","forceReload","initialLoad","context","$root","$off","$on","selectAll","toAdd","nodes","componentOptions","propsData","findGrouping","updateSelection","id","Multi","fetchId","externalFilters","dataGroups","dataFilters","infos","dataType","grouping","groupLookup","sortLookup","groupingPart","existing","sortingPart","fields","args","hasDetails","buildLookup","findFilter","hasCheckboxes","columns","headerCells","column","headTpl","$scopedSlots","canSort","columnSorting","newDirection","cycleSorting","renderCell","buildContent","rawValue","buildFromScope","scopeName","tpl","renderRow","$forceUpdate","classes","additional","rows","scope","buildDetails","detailsResult","colspan","renderGroupRow","keyValues","dataItem","cols","unshift","thead","dataRows","pageData","flat","tbody","dataTable","noDataPlaceholder","hasData","slot","pager","pageList","reloadLink","footer","Pager","PageList","FilterPopup","TriCheckbox","mapDirection","mapData","version","paramName","Version3","formatValueV3","fieldInfo","formatValueV4","buildUrl","filterGroups","clauses","customVars","typed","vars","joinSymbol","countParam","pageVars","Data","Total","locales","plPL","ptBR","DataGrid","install","vue"],"mappings":"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","file":"DataGrid.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DataGrid\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"DataGrid\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","// addapted from the document.currentScript polyfill by Adam Miller\n// MIT license\n// source: https://github.com/amiller-gh/currentScript-polyfill\n\n// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    root.getCurrentScript = factory();\n  }\n}(typeof self !== 'undefined' ? self : this, function () {\n  function getCurrentScript () {\n    var descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')\n    // for chrome\n    if (!descriptor && 'currentScript' in document && document.currentScript) {\n      return document.currentScript\n    }\n\n    // for other browsers with native support for currentScript\n    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {\n      return document.currentScript\n    }\n  \n    // IE 8-10 support script readyState\n    // IE 11+ & Firefox support stack trace\n    try {\n      throw new Error();\n    }\n    catch (err) {\n      // Find the second match for the \"at\" string to get file src url from stack.\n      var ieStackRegExp = /.*at [^(]*\\((.*):(.+):(.+)\\)$/ig,\n        ffStackRegExp = /@([^@]*):(\\d+):(\\d+)\\s*$/ig,\n        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),\n        scriptLocation = (stackDetails && stackDetails[1]) || false,\n        line = (stackDetails && stackDetails[2]) || false,\n        currentLocation = document.location.href.replace(document.location.hash, ''),\n        pageSource,\n        inlineScriptSourceRegExp,\n        inlineScriptSource,\n        scripts = document.getElementsByTagName('script'); // Live NodeList collection\n  \n      if (scriptLocation === currentLocation) {\n        pageSource = document.documentElement.outerHTML;\n        inlineScriptSourceRegExp = new RegExp('(?:[^\\\\n]+?\\\\n){0,' + (line - 2) + '}[^<]*<script>([\\\\d\\\\D]*?)<\\\\/script>[\\\\d\\\\D]*', 'i');\n        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();\n      }\n  \n      for (var i = 0; i < scripts.length; i++) {\n        // If ready state is interactive, return the script tag\n        if (scripts[i].readyState === 'interactive') {\n          return scripts[i];\n        }\n  \n        // If src matches, return the script tag\n        if (scripts[i].src === scriptLocation) {\n          return scripts[i];\n        }\n  \n        // If inline source matches, return the script tag\n        if (\n          scriptLocation === currentLocation &&\n          scripts[i].innerHTML &&\n          scripts[i].innerHTML.trim() === inlineScriptSource\n        ) {\n          return scripts[i];\n        }\n      }\n  \n      // If no match, return null\n      return null;\n    }\n  };\n\n  return getCurrentScript\n}));\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function cast<T>(data: T) {\r\n   return data;\r\n}\r\n","import Vue, { VNode, CreateElement } from \"vue\";\r\nexport const DataColumn = \"DataColumn\";\r\n\r\nexport interface IKeyValuePair {\r\n   key: string;\r\n   value: string;\r\n}\r\n\r\nexport interface IDataColumn {\r\n   title?: string;\r\n   field?: string;\r\n   template?: string | ((value: any, item: any, h: CreateElement) => string | VNode);\r\n   render?: ((value: any, item: any, h: CreateElement) => string | VNode);\r\n   headTemplate?: string;\r\n   sortable?: boolean;\r\n   width?: string;\r\n   type?: string;\r\n   formatOptions?: any;\r\n   values?: IKeyValuePair[] | string[] | number[];\r\n   icon?: string;\r\n   filter?: string | boolean;\r\n   sortOrder?: number;\r\n   sortDir?: \"asc\" | \"desc\";\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: DataColumn,\r\n   props: {\r\n      title: { type: String },\r\n      template: { },\r\n      headTemplate: { type: String },\r\n      sortOrder: { type: Number },\r\n      sortDir: { type: String, default: \"asc\" },\r\n      field: { type: String },\r\n      sortable: { type: Boolean, default: true },\r\n      render: {},\r\n      filter: { default: true },\r\n      width: { type: String },\r\n      type: { type: String },\r\n      values: { type: Array },\r\n      icon: { type: String },\r\n      formatOptions: { },\r\n   },\r\n   render(this: Vue, h) {\r\n      return h(\"div\");\r\n   }\r\n});\r\n","import { chain } from \"./linq\";\r\nimport { leftPad } from \"@/StringFormat\";\r\n//basic date time formatting\r\n\r\ninterface IDatePart {\r\n   token: string;\r\n   formatter: (date: Date) => string;\r\n   setter: (target: IDate, value: number) => void;\r\n   kind: TokenKind;\r\n}\r\n\r\nexport enum TokenKind {\r\n   Year,\r\n   Month,\r\n   Day,\r\n   Hour,\r\n   Minute,\r\n   Second\r\n}\r\n\r\nconst dateParts: IDatePart[] = [\r\n   {token: \"YYYY\", formatter: d => \"\"+d.getFullYear(), setter: (t,v) => t.year = v, kind: TokenKind.Year },\r\n   {token: \"YY\", formatter: d => (\"\"+d.getFullYear()).substr(2), setter: (t,v) => t.year = v, kind: TokenKind.Year }, //fix this after 9999 year ;)\r\n   {token: \"MM\", formatter: d => leftPad(\"\"+(d.getMonth()+1), 2, \"0\"), setter: (t,v) => t.month = v-1, kind: TokenKind.Month },\r\n   {token: \"DD\", formatter: d => leftPad(\"\"+d.getDate(), 2, \"0\"), setter: (t,v) => t.day = v, kind: TokenKind.Day },\r\n   {token: \"HH\", formatter: d => leftPad(\"\"+d.getHours(), 2, \"0\"), setter: (t,v) => t.hour = v, kind: TokenKind.Hour },\r\n   {token: \"mm\", formatter: d => leftPad(\"\"+d.getMinutes(), 2, \"0\"), setter: (t,v) => t.minute = v, kind: TokenKind.Minute },\r\n   {token: \"ss\", formatter: d => leftPad(\"\"+d.getSeconds(), 2, \"0\"), setter: (t,v) => t.second = v, kind: TokenKind.Second },\r\n];\r\n\r\nenum TokenType {\r\n   Const,\r\n   DatePart\r\n}\r\n\r\ntype IToken = {\r\n   type: TokenType.Const;\r\n   value: string;\r\n} | {\r\n   type: TokenType.DatePart,\r\n   part: IDatePart\r\n};\r\n\r\nfunction tokenize(format: string) {\r\n   const result: IToken[] = [];\r\n   while(format) {\r\n      const entry = dateLookup[format[0]];\r\n      const match = entry\r\n         ? entry.find(i => format.startsWith(i.token))\r\n         : undefined;\r\n\r\n      if(!match) {\r\n         const last = result.length > 0 ? result[result.length-1] : null;\r\n         if(last != null && last.type === TokenType.Const)\r\n            last.value+= format[0];\r\n         else\r\n            result.push({\r\n               type: TokenType.Const,\r\n               value: format[0]\r\n            });\r\n         format = format.substr(1);\r\n         continue;\r\n      }\r\n\r\n      result.push({\r\n         type: TokenType.DatePart,\r\n         part: match\r\n      });\r\n      format = format.substr(match.token.length);\r\n   }\r\n   return result;\r\n}\r\n\r\nexport function today() {\r\n   const value = new Date();\r\n   return new Date(value.getFullYear(), value.getMonth(), value.getDate());\r\n}\r\n\r\nexport function findLayout(format: string) {\r\n   return tokenize(format)\r\n      .map(i => (i.type === TokenType.DatePart ? i.part.kind : undefined) as TokenKind)\r\n      .filter(i => i !== undefined);\r\n}\r\n\r\nconst dateLookup: {[letter: string]: IDatePart[]} = {};\r\nchain(dateParts)\r\n   .groupBy(i => i.token[0])\r\n   .toList()\r\n   .forEach(i => dateLookup[i.key] = i.values.sort((a,b) => a.token.length < b.token.length ? 1 : -1));\r\n\r\nexport function formatDate(date: Date, format: string): string {\r\n   return tokenize(format)\r\n      .map(i => i.type === TokenType.DatePart ? i.part.formatter(date) : i.value)\r\n      .join(\"\");\r\n}\r\n\r\nexport function positionKind(position: number, format: string) {\r\n   let start = 0;\r\n   let kind: TokenKind | null = null;\r\n   for(const part of tokenize(format)) {\r\n      const value = part.type === TokenType.Const\r\n         ? part.value\r\n         : part.part.token;\r\n      if(part.type === TokenType.DatePart)\r\n         kind = part.part.kind;\r\n      if(position >= start + value.length) {\r\n         start += value.length;\r\n         continue;\r\n      }\r\n      return kind;\r\n   }\r\n   return kind;\r\n}\r\n\r\n//checks if specified char value can be placed at given position when using specified format\r\nexport function isMatching(input: string, position: number, format: string) {\r\n   let start = 0;\r\n   for(const part of tokenize(format)) {\r\n      const value = part.type === TokenType.Const\r\n         ? part.value\r\n         : part.part.token;\r\n      if(position >= start + value.length) {\r\n         start += value.length;\r\n         continue;\r\n      }\r\n\r\n      return part.type === TokenType.Const\r\n         ? part.value[position-start] === input\r\n         : /^\\d+$/gm.test(input);\r\n   }\r\n   return false;\r\n}\r\n\r\nexport function nearestInputIndex(position: number,format: string) {\r\n   let start = 0;\r\n   for(const part of tokenize(format)) {\r\n      const value = part.type === TokenType.Const\r\n         ? part.value\r\n         : part.part.token;\r\n      if(part.type === TokenType.Const || position >= start + value.length) {\r\n         start += value.length;\r\n         continue;\r\n      }\r\n      return Math.max(start, position);\r\n   }\r\n   return format.length;\r\n}\r\n\r\nexport function nextBounadry(position: number, format: string) {\r\n   let start = 0;\r\n   if(position >= format.length-1)\r\n      return format.length;\r\n   for(const part of tokenize(format)) {\r\n      if(part.type === TokenType.Const) {\r\n         start += part.value.length;\r\n         continue;\r\n      }\r\n      const length = part.part.token.length;\r\n      if(position >= start+length) {\r\n         start += length;\r\n         continue;\r\n      }\r\n      if(position < start)\r\n         return start;\r\n      return start+length;\r\n   }\r\n   return format.length-1;\r\n}\r\n\r\nexport function previousBoundary(position: number, format: string) {\r\n   let end = format.length-1;\r\n   const tokens = tokenize(format);\r\n   for(let a=tokens.length-1;a>=0;a--) {\r\n      const part = tokens[a];\r\n      if(part.type === TokenType.Const) {\r\n         end -= part.value.length;\r\n         continue;\r\n      }\r\n\r\n      const length = part.part.token.length;\r\n      if(position <= end-length+1) {\r\n         end -= length;\r\n         continue;\r\n      }\r\n\r\n      if(position > end+1)\r\n         return end+1;\r\n\r\n      return end-length+1;\r\n   }\r\n\r\n   return 0;\r\n}\r\n\r\ninterface IDate {\r\n   year: number;\r\n   month: number;\r\n   day: number;\r\n   hour: number;\r\n   minute: number;\r\n   second: number;\r\n}\r\n\r\nexport function tryParse(value: string, format: string): Date | null {\r\n   if(!value)\r\n      return null;\r\n\r\n   const result: IDate = {\r\n      day: 0,\r\n      hour: 0,\r\n      minute: 0,\r\n      month: 0,\r\n      second: 0,\r\n      year: 0\r\n   };\r\n   const parts = tokenize(format);\r\n   for(const part of parts) {\r\n      if(!value)\r\n         return null;\r\n      if(part.type === TokenType.Const) {\r\n         if(!value.startsWith(part.value))\r\n            return null;\r\n         value = value.substr(part.value.length);\r\n         continue;\r\n      }\r\n\r\n      const datePart = part.part;\r\n      const tokenValue = value.substr(0, datePart.token.length);\r\n      if(!/^\\d+$/gm.test(tokenValue))\r\n         return null;\r\n      value = value.substr(datePart.token.length);\r\n      datePart.setter(result, parseInt(tokenValue, 10));\r\n   }\r\n\r\n   return value.length === 0\r\n      ? new Date(result.year, result.month, result.day, result.hour, result.minute, result.second, 0) \r\n      : null;\r\n}\r\n","class Enumerable<T> {\r\n\r\n   private items: () => T[];\r\n\r\n   constructor(items: () => T[]) {\r\n      this.items = items;\r\n   }\r\n\r\n   public toList() {\r\n      return this.items();\r\n   }\r\n\r\n   public select<TResult>(selector: (item: T) => TResult) {\r\n      return new Enumerable<TResult>(() => this.items().map(selector));\r\n   }\r\n\r\n   public take(count: number) {\r\n      return new Enumerable<T>(() => {\r\n         const result: T[] = [];\r\n         const items = this.items();\r\n         for(let a=0; a< count && items.length; a++)\r\n            result.push(items[a]);\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public where(predicate: (item: T) => boolean) {\r\n      return new Enumerable<T>(() => {\r\n         const result: T[] = [];\r\n         this.items().forEach(i => {\r\n            if (predicate(i))\r\n               result.push(i);\r\n         });\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public orderBy(selector: (item: T) => any) {\r\n      return new Enumerable<T>(() => {\r\n         const items = this.items();\r\n         items.sort((a,b) => {\r\n            const keyA = selector(a);\r\n            const keyB = selector(b);\r\n            if(keyA < keyB)\r\n               return -1;\r\n            if(keyA > keyB)\r\n               return 1;\r\n            return 0;\r\n         });\r\n         return items;\r\n      });\r\n   }\r\n\r\n   public selectMany<TResult>(selector: (item: T) => TResult[]) {\r\n      return new Enumerable<TResult>(() => {\r\n         const result: TResult[] = [];\r\n         this.items().forEach(i => {\r\n            selector(i).forEach(j => result.push(j));\r\n         });\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public concat(other: T[]) {\r\n      return new Enumerable<T>(() => {\r\n         const result = this.items();\r\n         result.push(...other);\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public groupSorted(keysSelector: (item: T) => any[])  {\r\n\r\n      const arraysEqual = (first: any[], second: any[]) => {\r\n         if(first.length !== second.length)\r\n            return false;\r\n         for(let i=0;i<first.length;i++)\r\n            if(first[i] !== second[i])\r\n               return false;\r\n         return true;\r\n      };\r\n\r\n      return new Enumerable<ISortedGroup<T>>(() => {\r\n         const values = this.items();\r\n         let groupKey: any[] = [];\r\n         const result: Array<ISortedGroup<T>> = [];\r\n\r\n         for(let a=0;a<values.length;a++) {\r\n            const item = values[a];\r\n            const currentKey = keysSelector(item);\r\n            if(a === 0 || !arraysEqual(groupKey, currentKey))  {\r\n               groupKey = currentKey;\r\n               result.push({ key: groupKey, values: []});\r\n            }\r\n            result[result.length-1].values.push(item);\r\n         }\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public groupBy(keySelector: (item: T) => string) {\r\n    return new Enumerable<IGroup<T>>(() => {\r\n       const result: Array<IGroup<T>> = [];\r\n       const lookup: {[key: string]: T[]} = {};\r\n       this.items().forEach(i => {\r\n          const key = keySelector(i);\r\n          if(!lookup[key])\r\n            lookup[key] = [i];\r\n         else\r\n            lookup[key].push(i);\r\n       });\r\n\r\n       for(const key of Object.keys(lookup)) {\r\n          result.push({\r\n             key,\r\n             values: lookup[key]\r\n          });\r\n       }\r\n       return result;\r\n    });\r\n   }\r\n\r\n   public all(predicate: (item: T) => boolean) {\r\n      for(const item of this.items()) {\r\n         if(!predicate(item))\r\n            return false;\r\n      }\r\n      return true;\r\n   }\r\n\r\n   public zip<TSecond, TResult>(values: TSecond[], selector: (first: T, second: TSecond) => TResult) {\r\n      return new Enumerable<TResult>(() => {\r\n         const result: TResult[] = [];\r\n         const items = this.items();\r\n         for(let a=0;a<items.length;a++)\r\n            result.push(selector(items[a], values[a]));\r\n         return result;\r\n      });\r\n   }\r\n\r\n   public sum(selector: (item: T) => number) {\r\n      let result = 0;\r\n      for(const item of this.items())\r\n         result += selector(item);\r\n      return result;\r\n   }\r\n\r\n   public any(predicate: (item: T) => boolean) {\r\n      for(const item of this.items()) {\r\n         if(predicate(item))\r\n            return true;\r\n      }\r\n      return false;\r\n   }\r\n\r\n   public firstOrDefault(predicate?: (item: T) => boolean) {\r\n      const result = this.toList();\r\n      if (result.length === 0)\r\n         return undefined;\r\n      if (!predicate)\r\n         return result[0];\r\n\r\n      return result.find(predicate);\r\n   }\r\n\r\n   public cast<TResult>() {\r\n      return this as any as Enumerable<TResult>;\r\n   }\r\n}\r\n\r\nexport interface ISortedGroup<TValue> {\r\n   key: any[];\r\n   values: TValue[];\r\n}\r\n\r\nexport interface IGroup<TValue> {\r\n   key: string;\r\n   values: TValue[];\r\n}\r\n\r\nexport function chain<T>(items: T[]) {\r\n   return new Enumerable(() => items);\r\n}\r\n\r\nexport function range(start: number, count: number) {\r\n   const result = [];\r\n   for(let a=0;a<count;a++)\r\n      result.push(start+a);\r\n   return chain(result);\r\n}\r\n","//no we are not using library for this...\r\nexport function leftPad(text: string, length: number, placeholder: string) {\r\n   let result = text ? text : \"\";\r\n   while(result.length < length)\r\n      result = placeholder+result;\r\n   return result.length > length ? result.substr(0, length) : result;\r\n}\r\n","//based on code from accounting.js\r\n/*!\r\n * accounting.js v0.4.2\r\n * Copyright 2014 Open Exchange Rates\r\n *\r\n * Freely distributable under the MIT license.\r\n * Portions of accounting.js are inspired or borrowed from underscore.js\r\n *\r\n * Full details and documentation:\r\n * http://openexchangerates.github.io/accounting.js/\r\n */\r\n\r\nfunction unformat(value: any, decimal: string) {\r\n   // Fails silently (need decent errors):\r\n   if(!value)\r\n      return 0;\r\n\r\n   // Return the value as-is if it's already a number:\r\n   if (typeof value === \"number\") return value;\r\n\r\n    // Build regex to strip out everything except digits, decimal point and minus sign:\r\n   const regex = new RegExp(\"[^0-9-.]\", \"g\");\r\n   const result = parseFloat(\r\n      (\"\" + value)\r\n      .replace(/\\((?=\\d+)(.*)\\)/, \"-$1\") // replace bracketed values with negatives\r\n      .replace(decimal, '.')      // make sure decimal point is standard\r\n      .replace(regex, '')         // strip out any cruft\r\n   );\r\n\r\n   // This will fail silently which may cause trouble, let's wait and see:\r\n   return !isNaN(result) ? result : 0;\r\n}\r\n\r\n/**\r\n * Check and normalise the value of precision (must be positive integer)\r\n */\r\nfunction checkPrecision(val: number, base: number) {\r\n   val = Math.round(Math.abs(val));\r\n   return isNaN(val)? base : val;\r\n}\r\n\r\n/**\r\n * Implementation of toFixed() that treats floats more like decimals\r\n *\r\n * Fixes binary rounding issues (eg. (0.615).toFixed(2) === \"0.61\") that present\r\n * problems for accounting- and finance-related software.\r\n */\r\nfunction toFixed(value: number, precision: number) {\r\n   precision = checkPrecision(precision, 2);\r\n\r\n   const exponentialForm = Number(value + 'e' + precision);\r\n   const rounded = Math.round(exponentialForm);\r\n   return Number(rounded + 'e-' + precision).toFixed(precision);\r\n}\r\n\r\nexport function formatNumber(value: any, precision: number, thousand: string, decimal: string) {\r\n   const raw = unformat(value, decimal);\r\n\r\n   // Clean up precision\r\n   const usePrecision = checkPrecision(precision, 2);\r\n\r\n   // Do some calc:\r\n   const negative = raw < 0 ? \"-\" : \"\";\r\n   const base = parseInt(toFixed(Math.abs(raw || 0), usePrecision), 10) + \"\";\r\n   const mod = base.length > 3 ? base.length % 3 : 0;\r\n\r\n   // Format the number:\r\n   return negative +\r\n      (mod ? base.substr(0, mod) + thousand : \"\") +\r\n      base.substr(mod).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousand) +\r\n      (usePrecision ? decimal + toFixed(Math.abs(raw), usePrecision).split('.')[1] : \"\");\r\n}\r\n","import { VNode, CreateElement } from 'vue';\r\nimport { formatDate } from \"./DateFormat\";\r\nimport { formatNumber } from \"./NumberFormat\";\r\nimport { INumericFilterParams } from \"./components/NumericFilter\";\r\n\r\ninterface ITypeConfig {\r\n   name: string;\r\n   formatter?: (value: any, options: any, h: CreateElement, row: any) => string | VNode;\r\n   filterComponent?: string;\r\n   filterParams: any;\r\n}\r\n\r\nexport interface ILang {\r\n   yes: string;\r\n   no: string;\r\n   pagerPage: string;\r\n   pagerOfPages: string;\r\n   firstPage: string;\r\n   previousPage: string;\r\n   nextPage: string;\r\n   lastPage: string;\r\n   pageListItemTitle: string;\r\n   filterAccept: string;\r\n   filterReset: string;\r\n   dropdownLabel: string;\r\n   rangeFrom: string;\r\n   rangeTo: string;\r\n   containsValue: string;\r\n   startsWithValue: string;\r\n   endsWithValue: string;\r\n   valueNotEqual: string;\r\n   valueEqual: string;\r\n   labelValueEquals: string;\r\n}\r\n\r\nconst types: {[key: string]: ITypeConfig } = {};\r\nlet i18n: ILang = {\r\n   yes: \"Yes\",\r\n   no: \"No\",\r\n   pagerPage: \"Page\",\r\n   pagerOfPages: \"of\",\r\n   firstPage: \"First page\",\r\n   previousPage: \"Previous page\",\r\n   nextPage: \"Next page\",\r\n   lastPage: \"Last page\",\r\n   pageListItemTitle: \"Page %page%\",\r\n   filterAccept: \"Accept\",\r\n   filterReset: \"Reset\",\r\n   dropdownLabel: \"Select...\",\r\n   rangeFrom: \"From:\",\r\n   rangeTo: \"To:\",\r\n   containsValue: \"Contains\",\r\n   startsWithValue: \"Starts with\",\r\n   endsWithValue: \"Ends with\",\r\n   valueNotEqual: \"Not equals\",\r\n   valueEqual: \"Equals\",\r\n   labelValueEquals: \"Equals:\"\r\n};\r\n\r\nexport interface ICalendar {\r\n   dateFormat: string;\r\n   datePlaceholder: string;\r\n   dateTimeFormat: string;\r\n   dateTimePlaceholder: string;\r\n   timeFormat: string;\r\n   timePlaceholder: string;\r\n   weekStart: number;\r\n   dayNames: string[];\r\n   monthNamesFull: string[];\r\n   monthNamesShort: string[];\r\n   yearFormat: string;\r\n   yearRangeFormat: string;\r\n   monthFormat: string;\r\n   monthFirst: boolean;\r\n}\r\n\r\nconst calendarSettings: ICalendar = {\r\n   dateFormat: \"YYYY-MM-DD\",\r\n   datePlaceholder: \"yyyy-mm-dd\",\r\n   timeFormat: \"HH:mm\",\r\n   timePlaceholder: \"hh:mm\",\r\n   dateTimeFormat: \"YYYY-MM-DD HH:mm\",\r\n   dateTimePlaceholder: \"yyyy-mm-dd hh:mm\",\r\n   dayNames: [\r\n      \"Sun\",\r\n      \"Mon\",\r\n      \"Tue\",\r\n      \"Wed\",\r\n      \"Thu\",\r\n      \"Fri\",\r\n      \"Sat\",\r\n   ],\r\n   monthNamesFull: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n   monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n   weekStart: 1,\r\n   yearFormat: \"{year}\",\r\n   yearRangeFormat: \"{from} - {to}\",\r\n   monthFormat: \"{month}\",\r\n   monthFirst: true\r\n};\r\n\r\nexport interface ILocale {\r\n   calendar: ICalendar;\r\n   settings: ISettingsArgs;\r\n   text: ILang;\r\n}\r\n\r\nexport function setLocale(locale: ILocale) {\r\n   setSettings(locale.settings);\r\n   setCalendar(locale.calendar);\r\n   setLanguage(locale.text);\r\n}\r\n\r\nexport function getCalendar() {\r\n   return calendarSettings;\r\n}\r\n\r\nexport function setCalendar(calendar: any | ICalendar) {\r\n   const target = calendarSettings as any;\r\n   for(const prop of Object.getOwnPropertyNames(calendar)) {\r\n      if(target[prop] !== undefined)\r\n         target[prop] = calendar[prop];\r\n   }\r\n}\r\n\r\nexport interface ISettings {\r\n   idField: string;\r\n   thousandSeparator: string;\r\n   decimalPrecision: number;\r\n   decimalSeparator: string;\r\n   ignoreDateOffset: boolean;\r\n   defaultRemoteSource: string | null;\r\n}\r\n\r\nexport interface ISettingsArgs {\r\n   idField?: string;\r\n   thousandSeparator?: string;\r\n   decimalPrecision?: number;\r\n   decimalSeparator?: string;\r\n   ignoreDateOffset?: boolean;\r\n   defaultRemoteSource?: string;\r\n}\r\n\r\nconst settings: ISettings = {\r\n   idField: \"id\",\r\n   thousandSeparator: \" \",\r\n   decimalPrecision: 2,\r\n   decimalSeparator: \".\",\r\n   ignoreDateOffset: false,\r\n   defaultRemoteSource: null\r\n};\r\n\r\nexport function setSettings(values: any | ISettingsArgs) {\r\n   const target = settings as any;\r\n   for(const prop of Object.getOwnPropertyNames(values)) {\r\n      if(target[prop] !== undefined)\r\n         target[prop] = values[prop];\r\n   }\r\n}\r\n\r\nexport function getSettings() {\r\n   return settings;\r\n}\r\n\r\nexport function setLanguage(lang: ILang) {\r\n   i18n = lang;\r\n}\r\n\r\nexport interface ITypeDefinition {\r\n   formatter?: ((value: any, options: any, h: CreateElement, row: any) => string | VNode);\r\n   filterComponent?: string;\r\n   filterParams?: any;\r\n}\r\n\r\nexport function addType(name: string, definition: ITypeDefinition) {\r\n   types[name] = {\r\n      name,\r\n      formatter: definition.formatter,\r\n      filterComponent: definition.filterComponent,\r\n      filterParams: definition.filterParams\r\n   };\r\n}\r\n\r\nexport function getFormatter(typeName: string | undefined | null): (value: any, options: any, h: CreateElement, row: any) => string | VNode {\r\n   function defaultFormatter(value: any) {\r\n      return value !== undefined && value !== null ? \"\"+value : \"\";\r\n   }\r\n   if(!typeName || !types[typeName])\r\n      return defaultFormatter;\r\n   const candidate = types[typeName].formatter;\r\n   return candidate ? candidate : defaultFormatter;\r\n}\r\n\r\nexport function getFilterComponent(typeName: string | undefined | null) {\r\n   if(!typeName || !types[typeName])\r\n      return null;\r\n   const candidate = types[typeName];\r\n   return candidate && candidate.filterComponent \r\n      ? { component: candidate.filterComponent, params: candidate.filterParams } \r\n      : null;\r\n}\r\n\r\ntype LangKey = keyof ILang;\r\nexport function localize(key: LangKey) {\r\n   return i18n[key];\r\n}\r\n\r\nexport function setFilterComponent(typeName: string, filterComponent: string) {\r\n   const entry = types[typeName];\r\n   if(entry)\r\n      entry.filterComponent = filterComponent;\r\n}\r\n\r\naddType(\"bool\", {\r\n   formatter: value => {\r\n      if(value === undefined || value === null)\r\n         return \"\";\r\n      return !!value ? i18n.yes : i18n.no;\r\n   },\r\n   filterComponent: \"BoolFilter\"\r\n});\r\n\r\nfunction normailzeDate(value: any) {\r\n   if(value instanceof Date)\r\n      return value;\r\n\r\n   if(typeof value !== \"string\")\r\n      return new Date(value);\r\n\r\n   const last = value.charAt(value.length-1);\r\n   if(last === 'z' || last === 'Z')\r\n      return new Date(value.substr(0, value.length-1));\r\n   if(value.length < 6)\r\n      return new Date(value);\r\n\r\n   const separator = value.charAt(value.length-6);\r\n   const raw = separator === '+' || separator === \"-\"\r\n      ? value.substr(0, value.length-6)\r\n      : value;\r\n\r\n   return new Date(raw);\r\n}\r\n\r\naddType(\"date\", {\r\n   formatter: (value, options) => {\r\n      if(!value)\r\n         return \"\";\r\n      const date = normailzeDate(value);\r\n      return formatDate(date, typeof options === \"string\" ? options : calendarSettings.dateFormat);\r\n   },\r\n   filterComponent: \"DateFilter\"\r\n});\r\n\r\nfunction decimalFormatter(value: any, options: any) {\r\n   if(value === 0)\r\n      return \"0\";\r\n   if(!value)\r\n      return \"\";\r\n   if(!options)\r\n      return formatNumber(value, settings.decimalPrecision, settings.thousandSeparator, settings.decimalSeparator);\r\n\r\n   return formatNumber(value,\r\n      options.precision !== undefined ? options.precision : settings.decimalPrecision,\r\n      options.thousand !== undefined ? options.thousand : settings.thousandSeparator,\r\n      options.separator !== undefined ? options.separator : settings.decimalSeparator);\r\n}\r\n\r\naddType(\"decimal\", {\r\n   formatter: decimalFormatter,\r\n   filterComponent: \"NumericFilter\",\r\n   filterParams: { decimal: true } as INumericFilterParams,\r\n});\r\n\r\naddType(\"double\", {\r\n   formatter: decimalFormatter,\r\n   filterComponent: \"NumericFilter\",\r\n   filterParams: { decimal: true } as INumericFilterParams,\r\n});\r\n\r\naddType(\"text\", {\r\n   filterComponent: \"TextFilter\"\r\n});\r\n\r\naddType(\"int\", {\r\n   formatter: (value, options) => {\r\n      if(value === 0)\r\n         return \"0\";\r\n      if(!value)\r\n         return \"\";\r\n      if(!options)\r\n         return formatNumber(value, 0, settings.thousandSeparator, settings.decimalSeparator);\r\n\r\n      return formatNumber(value,\r\n         0,\r\n         options.thousand !== undefined ? options.thousand : settings.thousandSeparator,\r\n         options.separator !== undefined ? options.separator : settings.decimalSeparator);\r\n   },\r\n   filterComponent: \"NumericFilter\",\r\n   filterParams: { decimal: false } as INumericFilterParams,\r\n});\r\n\r\naddType(\"dateTime\", {\r\n   formatter: (value, options) => {\r\n      if(!value)\r\n         return \"\";\r\n      const date = normailzeDate(value);\r\n      return formatDate(date, typeof options === \"string\" ? options : calendarSettings.dateTimeFormat);\r\n   },\r\n   filterComponent: \"DateTimeFilter\"\r\n});\r\n","import { chain } from './linq';\r\n\r\n//promises by hand - for better compatibility ane less dependencies\r\n\r\nexport enum FilterOperator {\r\n   Equals = \"eq\",\r\n   GreaterThan = \"gt\",\r\n   GraterThanOrEqual = \"gte\",\r\n   LowerThan = \"lt\",\r\n   LowerThanOrEqual = \"lte\",\r\n   NotEqals = \"neq\",\r\n   In = \"in\",\r\n   Contains = \"substr\",\r\n   StartsWith = \"sw\",\r\n   EndsWith = \"ew\",\r\n}\r\n\r\nexport interface IColumnFilter {\r\n   field: string;\r\n   groups: IFilterGroup[];\r\n}\r\n\r\nexport interface IFilterValue {\r\n   value: any;\r\n   operator?: FilterOperator;\r\n   field: string;\r\n}\r\n\r\nexport interface IFilterGroup {\r\n   filters: IFilterValue[];\r\n   tag?: string;\r\n}\r\n\r\nexport enum SortDirection {\r\n   Asc = \"asc\",\r\n   Desc = \"desc\"\r\n}\r\n\r\nexport interface ISortField {\r\n   field: string;\r\n   direction: SortDirection;\r\n}\r\n\r\nexport interface IFieldInfo {\r\n   field: string;\r\n   dataType: string | undefined;\r\n}\r\n\r\nexport interface IDataRequest {\r\n   page: number | null;\r\n   pageSize: number | null;\r\n   sorting: ISortField[];\r\n   filters: IFilterGroup[];\r\n   fields: IFieldInfo[];\r\n   args: any | null;\r\n}\r\n\r\nexport interface IDataPromise {\r\n   resolver: (onSuccess: (data: any[], total: number, uri: string, pageUri: string) => void, onError: (error?: any) => void, onAlways: () => void) => void;\r\n}\r\n\r\nexport class DataPromise {\r\n\r\n   private onSuccess: (data: any[], total: number, uri: string, pageUri: string) => void = () => {};\r\n   private onError: (error?: any) => void = () => {};\r\n   private onAlways: () => void = () => {};\r\n   private resolver: (onSuccess: (data: any[], total: number, uri: string, pageUri: string) => void, onError: (error?: any) => void, onAlways: () => void) => void;\r\n\r\n   public constructor(resolver: (onSuccess: (data: any[], total: number, uri: string, pageUri: string) => void, onError: (error?: any) => void, onAlways: () => void) => void) {\r\n      this.resolver = resolver;\r\n   }\r\n\r\n   public success(callback: (data: any[], total: number, uri: string, pageUri: string) => void) {\r\n      this.onSuccess = callback;\r\n      return this;\r\n   }\r\n\r\n   public error(callback: (error?: any) => void) {\r\n      this.onError = callback;\r\n      return this;\r\n   }\r\n\r\n   public always(callback: () => void) {\r\n      this.onAlways = callback;\r\n      return this;\r\n   }\r\n\r\n   public fetch() {\r\n      this.resolver(this.onSuccess, this.onError, this.onAlways);\r\n   }\r\n}\r\n\r\nexport interface IDataSource {\r\n   load: (request: IDataRequest) => IDataPromise;\r\n   name: string;\r\n}\r\n\r\nconst sources: {[type: string]: (source: string) => IDataSource} = {};\r\n\r\nexport function addSource(name: string, factory: (source: string) => IDataSource): void {\r\n   sources[name] = factory;\r\n}\r\n\r\nexport interface IUrlSet {\r\n   dataUrl: string;\r\n   pageUrl: string;\r\n}\r\n\r\nexport interface IDataPage {\r\n   items: any[];\r\n   total: number;\r\n}\r\n\r\nconst xhrHooks: Array<(xhr: XMLHttpRequest) => void> = [];\r\nexport function addXhrHook(hook: (xhr: XMLHttpRequest) => void) {\r\n   if(hook)\r\n      xhrHooks.push(hook);\r\n}\r\n\r\nfunction normalize(data: any): any {\r\n   if(!data)\r\n      return data;\r\n   if(Array.isArray(data)) {\r\n      for(const item of data)\r\n         normalize(item);\r\n      return data;\r\n   }\r\n\r\n   if(typeof data === \"object\") {\r\n      for(const prop of Object.keys(data)) {\r\n         data[prop] = normalize(data[prop]);\r\n      }\r\n      return data;\r\n   }\r\n\r\n   if(typeof data === \"string\") {\r\n      const match = /^\\/Date\\(([0-9]+)\\)\\/$/.exec(data);\r\n      return match\r\n         ? new Date(parseInt(match[1], 10))\r\n         : data;\r\n   }\r\n\r\n   return data;\r\n}\r\n\r\nexport function addRemoteSource(name: string, factory: (baseUrl: string, request: IDataRequest) => IUrlSet, selector: (result: any) => IDataPage) {\r\n   sources[name] = (url: string) => ({\r\n      name,\r\n      load: (request) => ({ resolver: (onSuccess, onError, onAlways) => {\r\n         const urlSet = factory(url, request);\r\n         const xhr = new XMLHttpRequest();\r\n         xhr.onreadystatechange = () => {\r\n            if(xhr.readyState !== XMLHttpRequest.DONE)\r\n               return;\r\n            onAlways();\r\n            if(xhr.status < 200 || xhr.status >= 300) {\r\n               onError(xhr.status);\r\n               return;\r\n            }\r\n\r\n            const raw = JSON.parse(xhr.responseText);\r\n            const result = selector ? selector(raw) : raw as IDataPage;\r\n            onSuccess(normalize(result.items), result.total, urlSet.dataUrl, urlSet.pageUrl);\r\n         };\r\n         xhr.open(\"GET\", urlSet.pageUrl);\r\n         xhrHooks.forEach(i => i(xhr));\r\n         xhr.send();\r\n      } })\r\n   });\r\n}\r\n\r\nexport default function(source: any, sourceType: any) {\r\n   if(!source)\r\n      return emptySource();\r\n\r\n   if(typeof source === \"string\") {\r\n      if(!sourceType)\r\n         throw { error: \"DataGrid source type is not defined. Use 'type' property or set defaultRemoteSource through configuration.\" };\r\n      const builder = sources[sourceType];\r\n      if(builder)\r\n         return builder(source);\r\n      throw { error: `Not supported data source type: ${sourceType}.` };\r\n   }\r\n   if(Array.isArray(source)) {\r\n      return arraySource(source);\r\n   }\r\n\r\n   throw { error: \"Not supported data type passed as source for grid. Expected string url or array of objects.\" };\r\n}\r\n\r\nfunction emptySource(): IDataSource {\r\n   return {\r\n      name: \"empty\",\r\n      load() {\r\n         return { resolver: (onSuccess, _, onAlways) => {\r\n            onSuccess([], 0, \"no-data\", \"no-data\");\r\n            onAlways();\r\n         } };\r\n      }\r\n   };\r\n}\r\n\r\nexport function operatorOrDefault(operator: FilterOperator | undefined) {\r\n   return operator !== undefined ? operator : FilterOperator.Equals;\r\n}\r\n\r\nfunction isRowMatching(row: any, filter: IFilterValue) {\r\n   const value = row[filter.field];\r\n   const operator = operatorOrDefault(filter.operator);\r\n   if(operator === FilterOperator.Equals)\r\n      return value === filter.value;\r\n   if(operator === FilterOperator.NotEqals)\r\n      return value !== filter.value;\r\n   if(operator === FilterOperator.Contains)\r\n      return value instanceof String && value.indexOf(filter.value) >= 0;\r\n   if(operator === FilterOperator.StartsWith)\r\n      return value instanceof String && value.startsWith(filter.value);\r\n   if(operator === FilterOperator.EndsWith)\r\n      return value instanceof String && value.endsWith(filter.value);\r\n   if(operator === FilterOperator.GraterThanOrEqual)\r\n      return value >= filter.value;\r\n   if(operator === FilterOperator.GreaterThan)\r\n      return value > filter.value;\r\n   if(operator === FilterOperator.LowerThan)\r\n      return value < filter.value;\r\n   if(operator === FilterOperator.LowerThanOrEqual)\r\n      return value <= filter.value;\r\n   if(operator === FilterOperator.In)\r\n      return filter.value && filter.value.length > 0 && chain(filter.value as any[]).any(i => i === value);\r\n   throw {message: `Unknown filter type: ${operator}` };\r\n}\r\n\r\nfunction arraySource(values: any[]): IDataSource {\r\n   return {\r\n      name: \"array\",\r\n      load(data) {\r\n         return { resolver: (onSuccess, _, onAlways) => {\r\n            const isMatching = (row: any) => chain(data.filters)\r\n               .all(group => chain(group.filters).any(filter => isRowMatching(row, filter)));\r\n\r\n            const copy = data.filters.length > 0\r\n               ? chain(values).where(isMatching).toList()\r\n               : values.slice();\r\n\r\n            if(data.sorting.length > 0)\r\n               copy.sort((a, b) => {\r\n                  for(const entry of data.sorting) {\r\n                     if(a[entry.field] === b[entry.field])\r\n                        continue;\r\n                     let isLower = a[entry.field] < b[entry.field];\r\n                     if(entry.direction === \"desc\")\r\n                        isLower = !isLower;\r\n                     return isLower ? -1 : 1;\r\n                  }\r\n                  return 0;\r\n               });\r\n\r\n            const result = data.page !== null && data.pageSize !== null\r\n               ? copy.slice(data.page*data.pageSize, (data.page+1)*data.pageSize)\r\n               : copy;\r\n            onSuccess(result, copy.length, \"local\", \"local\");\r\n            onAlways();\r\n         } };\r\n      }\r\n   };\r\n}\r\n","import Vue from \"vue\";\r\n\r\ninterface IThis extends Vue {\r\n   value: number;\r\n   separator: string;\r\n   float: boolean;\r\n   emitValue: (buffer: string) => number;\r\n   formatValue: (value: number) => string;\r\n}\r\n\r\nconst validKeys: {[key: string]: boolean} = {};\r\n[\"Backspace\", \"Tab\", \"ArrowLeft\", \"ArrowRight\"].forEach(i => validKeys[i] = true);\r\n\r\nexport default Vue.extend({\r\n   name: \"NumericInput\",\r\n   props: {\r\n      value: { type: Number, default: null },\r\n      float: { type: Boolean, default: false },\r\n      separator: { type: String, default: \".\" }\r\n   },\r\n   data(this: IThis) {\r\n      return {\r\n         buffer: this.value !== null && this.value !== undefined ? \"\"+this.value : \"\",\r\n      };\r\n   },\r\n   methods: {\r\n      formatValue(this: IThis, value: number) {\r\n         return value ? (\"\"+value).replace(\".\", this.separator) : \"\";\r\n      },\r\n      emitValue(this: IThis, buffer: string) {\r\n         if(buffer.endsWith(this.separator))\r\n            buffer = buffer+\"0\";\r\n         if(buffer.startsWith(this.separator))\r\n            buffer = \"0\"+buffer;\r\n         buffer = buffer.replace(this.separator, \".\");\r\n         const newValue = (() => {\r\n            if(buffer === \"0\")\r\n               return 0;\r\n            if(!buffer)\r\n               return null;\r\n            if(this.float)\r\n               return parseFloat(buffer);\r\n            return parseInt(buffer, 10);\r\n         })();\r\n\r\n         if(newValue !== this.value)\r\n            this.$emit(\"input\", newValue);\r\n         return newValue;\r\n      }\r\n   } as any,\r\n   render(this: IThis, h) {\r\n      return h(\"input\", {\r\n         attrs: { type: \"text\" },\r\n         domProps: { value: this.formatValue(this.value) },\r\n         on: {\r\n            keydown: (e: KeyboardEvent) => {\r\n               const target = e.target as HTMLInputElement;\r\n               if(e.ctrlKey)\r\n                  return true;\r\n               if(e.key >= \"0\" && e.key <= \"9\")\r\n                  return true;\r\n               if(/F[0-9]{1,2}/.test(e.key))\r\n                  return true;\r\n               if(e.key === \"-\" && !target.value)\r\n                  return true;\r\n               if(e.key === this.separator && this.float)\r\n                  return target.value.indexOf(this.separator) === -1;\r\n               if(validKeys[e.key])\r\n                  return true;\r\n               if(e.key === \"Enter\") {\r\n                  this.emitValue(target.value);\r\n                  return true;\r\n               }\r\n               if(e.key === \"Escape\") {\r\n                  this.emitValue(\"\"+this.value);\r\n                  target.value = \"\"+this.value;\r\n                  (e.target as HTMLInputElement).blur();\r\n               }\r\n\r\n               e.stopPropagation();\r\n               e.preventDefault();\r\n               return false;\r\n            },\r\n            blur: (e: Event) => {\r\n               const target = e.target as HTMLInputElement;\r\n               const newValue = this.emitValue(target.value);\r\n               target.value = this.formatValue(newValue);\r\n            }\r\n         }\r\n      });\r\n   }\r\n});\r\n","import Vue, { VNode } from \"vue\";\r\nimport { getCalendar } from '@/Config';\r\nimport { range } from '@/linq';\r\nimport \"./CalendarDisplay.less\";\r\nimport { today } from '@/DateFormat';\r\n\r\ninterface IThis extends Vue {\r\n   value: Date;\r\n   mode: Mode;\r\n   editValue: Date;\r\n   switchMode: (mode: Mode, value: Date) => void;\r\n}\r\n\r\nenum Mode {\r\n   Year = \"year\",\r\n   Month = \"month\",\r\n   Day = \"day\"\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"CalendarDisplay\",\r\n   props: {\r\n      value: { type: Date, default: null },\r\n   },\r\n   data() {\r\n      return {\r\n         mode: Mode.Day,\r\n         editValue: null\r\n      };\r\n   },\r\n   methods: {\r\n      switchMode(this: IThis, mode: Mode, value: Date) {\r\n         this.editValue = value;\r\n         this.mode = mode;\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n      const date = (() => {\r\n         if(this.editValue)\r\n            return this.editValue;\r\n         return this.value ? this.value : today();\r\n      })();\r\n      const settings = getCalendar();\r\n      const year = date.getFullYear();\r\n      const month = date.getMonth();\r\n\r\n      const selectedTime = this.value\r\n         ? new Date(this.value.getFullYear(), this.value.getMonth(), this.value.getDate()).getTime()\r\n         : 0;\r\n\r\n      const renderDays = () => {\r\n         const layout = range(0, 7).select(i => (settings.weekStart+i) % 7).toList();\r\n\r\n         const monthStart = new Date(year, month, 1);\r\n         const monthEnd = new Date(year, month+1, 0);\r\n         const startDay = monthStart.getDay(); //0 = Sunday, 1 = Monday... 6 = Saturday\r\n\r\n         const fromPrev = layout.indexOf(startDay);\r\n         const fromNext = 6 - layout.indexOf(monthEnd.getDay());\r\n         const dayCount = monthEnd.getDate();\r\n         const cells = range(-fromPrev, dayCount+fromPrev+fromNext).select(i => {\r\n            const current = new Date(year, month, 1+i);\r\n            const isSelected = selectedTime === current.getTime();\r\n            if(this.value) {\r\n               current.setHours(this.value.getHours());\r\n               current.setMinutes(this.value.getMinutes());\r\n               current.setSeconds(this.value.getSeconds());\r\n            }\r\n            const cssClass = (() => {\r\n               if(i < 0)\r\n                  return \"dg-prev\";\r\n               return i >= dayCount ? \"dg-next\" : null;\r\n            })();\r\n            return h(\"li\", {\r\n               class: [cssClass, isSelected ? \"dg-date-selected\" : null],\r\n               on: {\r\n                  click: (e: Event) => {\r\n                     e.stopPropagation();\r\n                     this.$emit(\"input\", current);\r\n                  }\r\n               }\r\n            }, \"\"+current.getDate());\r\n         });\r\n\r\n         return h(\"ul\", { class: [\"dg-days\"] }, cells.toList());\r\n      };\r\n\r\n      interface IHeaderDefinition {\r\n         onFirst: () => void;\r\n         onPrev?: () => void;\r\n         onNext?: () => void;\r\n         onLast: () => void;\r\n         items: Array<{action: () => void; title: string}>;\r\n      }\r\n\r\n      const buildHeader = (definition: IHeaderDefinition) => {\r\n         const renderLinkOrNull = (text: string, css: string | null, onClick: (() => void) | undefined) => onClick != null\r\n            ? h(\"a\", {\r\n               class: css,\r\n               attrs: {\r\n                  href: \"#\"\r\n               },\r\n               on: {\r\n                  click: (e: Event) => {\r\n                     e.preventDefault();\r\n                     onClick();\r\n                  }\r\n               }\r\n            }, text)\r\n            : null;\r\n         const linksPrev = h(\"div\", { class: [\"dg-links-prev\", \"dg-links\"] }, [\r\n            renderLinkOrNull(\"《\", \"dg-first\", definition.onFirst),\r\n            renderLinkOrNull(\"〈\", \"dg-prev\", definition.onPrev),\r\n         ]);\r\n\r\n         const linksNext = h(\"div\", { class: [\"dg-links-next\", \"dg-links\"] }, [\r\n            renderLinkOrNull(\"〉\", \"dg-next\", definition.onNext),\r\n            renderLinkOrNull(\"》\", \"dg-last\", definition.onLast),\r\n         ]);\r\n\r\n         const title = h(\"div\", { class: \"dg-title\" }, definition.items.map(i => renderLinkOrNull(i.title, null, i.action)));\r\n\r\n         return h(\"div\", { class: \"dg-calendar-head\" }, [linksPrev, title, linksNext]);\r\n      };\r\n\r\n      const daysHeader = () => {\r\n         const head = [\r\n            { title: settings.monthFormat.replace(\"{month}\", settings.monthNamesFull[month]), action: () => this.mode = Mode.Month },\r\n            { title: settings.yearFormat.replace(\"{year}\", \"\"+year), action: () => this.mode = Mode.Year },\r\n         ];\r\n         if(!settings.monthFirst)\r\n            head.reverse();\r\n         return buildHeader({\r\n            items: head,\r\n            onFirst: () => this.editValue = new Date(year-1, month, 1),\r\n            onPrev: () => this.editValue = new Date(year, month-1, 1),\r\n            onLast: () => this.editValue = new Date(year+1, month, 1),\r\n            onNext: () => this.editValue = new Date(year, month+1, 1),\r\n         });\r\n      };\r\n\r\n      const monthsHeader = () => buildHeader({\r\n         items: [\r\n            { title: settings.yearFormat.replace(\"{year}\", \"\"+year), action: () => this.mode = Mode.Year },\r\n         ],\r\n         onFirst: () => this.editValue = new Date(year-1, month, 1),\r\n         onLast: () => this.editValue = new Date(year+1, month, 1),\r\n      });\r\n\r\n      const yearsHeader = () => {\r\n         const from = year-year%10;\r\n         const to = from+9;\r\n         return buildHeader({\r\n            items: [\r\n               { title: settings.yearRangeFormat.replace(\"{from}\", \"\"+from).replace(\"{to}\", \"\"+to), action: () => {} },\r\n            ],\r\n            onFirst: () => this.editValue = new Date(year-10, month, 1),\r\n            onLast: () => this.editValue = new Date(year+10, month, 1),\r\n         });\r\n      };\r\n\r\n      const renderMonths = () => {\r\n         const cells = range(0, 12).select(i => h(\"li\", {\r\n            on: {\r\n               click: () => this.switchMode(Mode.Day, new Date(year, i, 1))\r\n            }\r\n         }, settings.monthNamesShort[i]));\r\n         return h(\"ul\", { class: [\"dg-months\"] }, cells.toList());\r\n      };\r\n\r\n      const renderYears = () => {\r\n         const start = year-year%10;\r\n         const cells = range(start, 10).select(i => h(\"li\", {\r\n            on: {\r\n               click: () => this.switchMode(Mode.Month, new Date(i, month, 1))\r\n            }\r\n         }, \"\"+i));\r\n         return h(\"ul\", { class: [\"dg-years\"] }, cells.toList());\r\n      };\r\n\r\n      const daysSubHeader = () => {\r\n         const cells = range(0, 7)\r\n            .select(i => (settings.weekStart+i) % 7)\r\n            .select(i => h(\"li\", settings.dayNames[i]));\r\n         return h(\"ul\", { class: \"dg-sub-header\" }, cells.toList());\r\n      };\r\n\r\n      const modes: {[key: string]: {body: () => VNode; header: () => VNode; subHeader: () => VNode | null}} = {};\r\n      modes[Mode.Day] = { body: renderDays, header: daysHeader, subHeader: daysSubHeader };\r\n      modes[Mode.Month] = { body: renderMonths, header: monthsHeader, subHeader: () => null };\r\n      modes[Mode.Year] = { body: renderYears, header: yearsHeader, subHeader: () => null };\r\n\r\n      return h(\"div\", {\r\n         class: [\"dg-calendar\", `dg-type-${this.mode}`],\r\n         on: {\r\n            click: (e: Event) => e.stopPropagation()\r\n         }\r\n      }, [\r\n         modes[this.mode].header(),\r\n         modes[this.mode].subHeader(),\r\n         h(\"div\", { class: [\"dg-calendar-display\"] }, [\r\n            modes[this.mode].body()\r\n         ])\r\n      ]);\r\n   },\r\n   components: {\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\nimport NumericInput from \"./NumericInput\";\r\nimport { localize } from \"../Config\";\r\n\r\ninterface IThis extends Vue {\r\n   pageCount: number;\r\n   total: number;\r\n   value: number;\r\n   pageSize: number;\r\n   workingSize: number;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"Pager\",\r\n   props: {\r\n      total: { type: Number, default: 0 },\r\n      value: { type: Number, default: 0 },\r\n      pageSize: { type: Number, default: 10 }\r\n   },\r\n   computed: {\r\n      pageCount(this: IThis) {\r\n         if(this.total <= 0)\r\n            return 1;\r\n         return Math.ceil(this.total/this.workingSize);\r\n      },\r\n      workingSize(this: IThis) {\r\n         return this.pageSize >= 1 ? this.pageSize : 1;\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n      return h(\"div\", { class: \"dg-pager\" }, [\r\n         h(\"span\", localize(\"pagerPage\")),\r\n         h(\"numeric-input\", {\r\n            props: {\r\n               value: this.value+1,\r\n            },\r\n            style: {\r\n               width: (10+((\"\"+this.value).length*20))+\"px\"\r\n            },\r\n            on: {\r\n               input: (value: number) => {\r\n                  const candidate = value >= 1 ? value-1 : 0;\r\n                  this.$emit(\"input\", candidate >= this.pageCount\r\n                     ? this.pageCount -1\r\n                     : (candidate < 0 ? 0 : candidate));\r\n               }\r\n            }\r\n         }),\r\n         h(\"span\", `${localize(\"pagerOfPages\")} ${this.pageCount}`),\r\n      ]);\r\n\r\n   },\r\n   components: {\r\n      NumericInput\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\nimport NumericInput from \"./NumericInput\";\r\nimport { localize, ILang } from \"../Config\";\r\nimport { chain } from \"../linq\";\r\n\r\ninterface IThis extends Vue {\r\n   pageCount: number;\r\n   total: number;\r\n   value: number;\r\n   pageSize: number;\r\n   workingSize: number;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"PageList\",\r\n   props: {\r\n      total: { type: Number, default: 0 },\r\n      value: { type: Number, default: 0 },\r\n      pageSize: { type: Number, default: 10 }\r\n   },\r\n   computed: {\r\n      pageCount(this: IThis) {\r\n         if(this.total <= 0)\r\n            return 1;\r\n         return Math.ceil(this.total/this.workingSize);\r\n      },\r\n      workingSize(this: IThis) {\r\n         return this.pageSize >= 1 ? this.pageSize : 1;\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n\r\n      const buildRange = () => {\r\n         const result: number[] = [];\r\n         for(let a=this.value-2;a<this.value;a++)\r\n            if(a >= 0)\r\n               result.push(a);\r\n         result.push(this.value);\r\n         for(let a=this.value+1;result.length < 5 && a<this.pageCount;a++)\r\n            result.push(a);\r\n         while(result.length < 5 && result[0] !== 0)\r\n            result.splice(0, 0, result[0]-1);\r\n\r\n         return result;\r\n      };\r\n\r\n      const pageLinks = buildRange()\r\n         .map(i => i === this.value\r\n            ? h(\"span\", {class: \"current-page\" }, \"\"+(i+1))\r\n            : h(\"a\", {\r\n               attrs: { href: \"#\", title: localize(\"pageListItemTitle\").replace(\"%page%\", \"\"+(i+1)) },\r\n               on: {\r\n                  click: (e: MouseEvent) => {\r\n                     e.preventDefault();\r\n                     this.$emit(\"input\", i);\r\n                  }\r\n               }\r\n            }, \"\"+(i+1))\r\n         );\r\n\r\n      const links: Array<{title: keyof ILang; text: string; selector: () => number}> = [\r\n         { title: \"firstPage\", text: \"≪\", selector: () => 0 },\r\n         { title: \"previousPage\", text: \"<\", selector: () => this.value > 0 ? this.value-1 : 0  },\r\n         { title: \"nextPage\", text: \">\", selector: () => this.value < this.pageCount-1 ? this.value+1 : this.pageCount-1  },\r\n         { title: \"lastPage\", text: \"≫\", selector: () => this.pageCount-1  },\r\n      ];\r\n\r\n      const linkNodes = links.map(i => h(\"a\", {\r\n         attrs: { href: \"#\", title: localize(i.title), disabled: i.selector() === this.value ? \"disabled\" : null },\r\n         on: {\r\n            click: (e: MouseEvent) => {\r\n               e.preventDefault();\r\n               this.$emit(\"input\", i.selector());\r\n            }\r\n         }\r\n      }, i.text));\r\n\r\n      linkNodes.splice(2, 0, ...pageLinks);\r\n\r\n      return h(\"div\", { class: \"dg-page-list\" }, linkNodes);\r\n\r\n   },\r\n   components: {\r\n      NumericInput\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\n\r\ninterface IThis extends Vue {\r\n   value: boolean;\r\n   label: string;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"Checkbox\",\r\n   props: {\r\n      value: { type: Boolean, default: false },\r\n      label: { type: String },\r\n   },\r\n   render(this: IThis, h) {\r\n      return h(\"label\", { }, [\r\n         h(\"input\", {\r\n            attrs: {\r\n               type: \"checkbox\",\r\n            },\r\n            domProps: {\r\n               checked: !!this.value\r\n            },\r\n            on: {\r\n               input: (e: Event) => this.$emit(\"input\", (e.target as HTMLInputElement).checked)\r\n            }\r\n         }),\r\n         this.label\r\n      ]);\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup, IFilterValue, FilterOperator } from \"../DataSource\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport { chain } from '@/linq';\r\nimport { localize } from \"../Config\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"BoolFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n   },\r\n   render(this: IThis, h) {\r\n      const filters = this.value && this.value.length ? this.value[0].filters : [];\r\n      const trueFilter = !!filters.find(i => i.value);\r\n      const falseFilter = !!filters.find(i => !i.value);\r\n\r\n      const emitValue = (withTrue: boolean, withFalse: boolean) => {\r\n         const newFilters = chain([\r\n            {emit: withTrue, value: true },\r\n            {emit: withFalse, value: false }\r\n         ])\r\n            .where(i => i.emit)\r\n            .select<IFilterValue>(i => ({\r\n               value: i.value,\r\n               operator: FilterOperator.Equals,\r\n               field: this.fieldName\r\n            }))\r\n            .toList();\r\n         const group: IFilterGroup = {\r\n            filters: newFilters\r\n         };\r\n         this.$emit(\"input\", [group]);\r\n      };\r\n\r\n      return h(\"div\", { }, [\r\n         h(\"Checkbox\", {\r\n            props: {\r\n               label: localize(\"yes\"),\r\n               value: trueFilter\r\n            },\r\n            on: {\r\n               input: (e: boolean) => emitValue(e, falseFilter)\r\n            }\r\n         }),\r\n         h(\"Checkbox\", {\r\n            props: {\r\n               label: localize(\"no\"),\r\n               value: falseFilter\r\n            },\r\n            on: {\r\n               input: (e: boolean) => emitValue(trueFilter, e)\r\n            }\r\n         })\r\n      ]);\r\n   },\r\n   components: {\r\n      Checkbox\r\n   }\r\n});\r\n","import Vue from 'vue';\r\nimport \"./ScrollPanel.less\";\r\n\r\ninterface IThis extends Vue {\r\n   vOffset: number;\r\n   value: number;\r\n}\r\n\r\nfunction findRoot(item: HTMLElement) {\r\n   while(true) {\r\n     if(item.classList.contains(\"dg-scroll-panel\"))\r\n        return item;\r\n     item = item.parentElement as HTMLElement;\r\n   }\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"ScrollPanel\",\r\n   data(this: IThis) {\r\n      return {\r\n         vOffset: this.value,\r\n      };\r\n   },\r\n   props: {\r\n      value: { type: Number, default: 0 }\r\n   },\r\n   mounted(this: IThis) {\r\n      this.vOffset = this.value;\r\n   },\r\n   watch: {\r\n      value(this: IThis) {\r\n         this.vOffset = this.value;\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n      return h(\"div\", {\r\n         class: \"dg-scroll-panel\",\r\n         on: {\r\n            wheel: (e: MouseWheelEvent) => {\r\n               e.preventDefault();\r\n               this.vOffset += Math.round(e.deltaY > 10 ? e.deltaY/10 : e.deltaY);\r\n               this.$emit(\"input\", this.vOffset);\r\n            },\r\n         },\r\n         directives: [{\r\n            name: \"ContentMargin\",\r\n            value: {\r\n               value: this.vOffset,\r\n               valueAdjust: v => {\r\n                  this.vOffset = v;\r\n                  this.$emit(\"input\", v);\r\n               } } as IContentMargin\r\n            }, {\r\n               name: \"BarMargin\",\r\n               value: this.vOffset\r\n            }\r\n         ]\r\n      }, [\r\n         h(\"div\", {\r\n            class: \"dg-scroll-content\",\r\n         }, this.$slots.default),\r\n         h(\"div\", { class: \"dg-scroll-track\" }, [\r\n            h(\"div\", {\r\n               on: {\r\n                  mousedown: (e: MouseEvent) => {\r\n                     if(e.button !== 0)\r\n                        return;\r\n                     e.preventDefault();\r\n                     const root = findRoot(e.target as HTMLElement);\r\n                     const content = root.querySelector(\".dg-scroll-content\") as HTMLElement;\r\n                     const bar = root.querySelector(\".dg-scroll-track div\") as HTMLElement;\r\n                     const containerHeight = root.clientHeight;\r\n                     const maxContentOffset = content.clientHeight - containerHeight;\r\n                     const startPos = e.pageY;\r\n                     const startOffset = this.vOffset;\r\n                     const maxBarOffset = containerHeight - bar.clientHeight;\r\n\r\n                     const moveHandler = (ev: MouseEvent) => {\r\n                        e.stopImmediatePropagation();\r\n                        e.preventDefault();\r\n                        const delta = ev.pageY-startPos;\r\n                        const percent = delta/maxBarOffset;\r\n                        this.vOffset = startOffset + Math.round(percent*maxContentOffset);\r\n                        this.$emit(\"input\", this.vOffset);\r\n                     };\r\n\r\n                     let endHandler: (ev: MouseEvent) => void;\r\n                     endHandler = (ev: MouseEvent) => {\r\n                        if(ev.button !== 0)\r\n                           return;\r\n                        e.preventDefault();\r\n                        document.body.removeEventListener(\"mousemove\", moveHandler);\r\n                        document.body.removeEventListener(\"mouseup\", endHandler);\r\n                     };\r\n                     document.body.addEventListener(\"mousemove\", moveHandler);\r\n                     document.body.addEventListener(\"mouseup\", endHandler);\r\n                  }\r\n               }\r\n            })\r\n         ])\r\n      ]);\r\n   },\r\n   directives: {\r\n      BarMargin(el, binding) {\r\n         const contentOffset = binding.value as number;\r\n         const content = el.querySelector(\".dg-scroll-content\") as HTMLElement;\r\n         const bar = el.querySelector(\".dg-scroll-track div\") as HTMLElement;\r\n         const containerHeight = el.clientHeight;\r\n         const maxContentOffset = content.clientHeight - containerHeight;\r\n         const percent = contentOffset/maxContentOffset;\r\n         const maxBarOffset = containerHeight - bar.clientHeight;\r\n         const offset = Math.round(maxBarOffset*percent);\r\n         bar.style.marginTop = `${offset}px`;\r\n      },\r\n      ContentMargin(el, binding) {\r\n         const value = binding.value as IContentMargin;\r\n         const containerHeight = el.clientHeight;\r\n         const content = el.querySelector(\".dg-scroll-content\") as HTMLElement;\r\n         const maxOffset = content.clientHeight - containerHeight;\r\n         const offset = Math.max(Math.min(maxOffset, value.value), 0);\r\n         if(offset !== value.value)\r\n            value.valueAdjust(offset);\r\n         content.style.marginTop = `-${offset}px`;\r\n      }\r\n   }\r\n});\r\n\r\ninterface IContentMargin {\r\n   value: number;\r\n   valueAdjust: (value: number) => void;\r\n}\r\n","import Vue from \"vue\";\r\nimport { getCalendar } from \"@/Config\";\r\nimport { findLayout, TokenKind, today } from \"@/DateFormat\";\r\nimport { range } from '@/linq';\r\nimport { leftPad } from \"@/StringFormat\";\r\nimport ScrollPanel from \"./ScrollPanel\";\r\nimport \"./TimeDisplay.less\";\r\n\r\ninterface IThis extends Vue {\r\n   format: string;\r\n   value: Date;\r\n   offsets: Array<{kind: TokenKind, value: number}>;\r\n   snapItems: () => void;\r\n}\r\n\r\ninterface IValuePart {\r\n   kind: TokenKind;\r\n   count: number;\r\n   setter: (target: Date, value: number) => void;\r\n   getter: (target: Date) => number;\r\n}\r\nconst parts: IValuePart[] = [\r\n   { kind: TokenKind.Hour, getter: i => i.getHours(), count: 24, setter: (d,v) => d.setHours(v) },\r\n   { kind: TokenKind.Minute, getter: i => i.getMinutes(), count: 60, setter: (d,v) => d.setMinutes(v) },\r\n   { kind: TokenKind.Second, getter: i => i.getSeconds(), count: 60, setter: (d,v) => d.setSeconds(v) },\r\n];\r\n\r\nexport default Vue.extend({\r\n   name: \"TimeDisplay\",\r\n   props: {\r\n      value: { type: Date },\r\n      format: { type: String, default: getCalendar().timeFormat }\r\n   },\r\n   data() {\r\n      return {\r\n         offsets: [\r\n            {kind: TokenKind.Hour, value: 0 },\r\n            {kind: TokenKind.Minute, value: 0 },\r\n            {kind: TokenKind.Second, value: 0 },\r\n         ]\r\n      };\r\n   },\r\n   mounted(this: IThis) {\r\n      this.snapItems();\r\n   },\r\n   watch: {\r\n      value(this: IThis) {\r\n         this.snapItems();\r\n      }\r\n   },\r\n   methods: {\r\n      snapItems(this: IThis) {\r\n         const value = this.value ? this.value : today();\r\n         const item = this.$el.querySelector(\"li\") as HTMLElement;\r\n         const itemSize = item.clientHeight;\r\n         this.offsets = parts.map(i => ({\r\n            kind: i.kind,\r\n            value: itemSize*i.getter(value)\r\n         }));\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n\r\n      const layout = findLayout(this.format)\r\n         .map(i => parts.find(j => j.kind === i) as IValuePart)\r\n         .filter(i => i !== undefined);\r\n\r\n      const getCurrent = () => this.value ? this.value : today();\r\n      const raw = getCurrent();\r\n\r\n      const renderValue = (part: IValuePart) => {\r\n         const value = part.getter(raw);\r\n         const entry = this.offsets.find(i => i.kind === part.kind);\r\n         if(!entry)\r\n            throw { message: `No offset entry for token type: ${part.kind}` };\r\n\r\n         return h(\"scroll-panel\", {\r\n            props: {\r\n               value: entry.value\r\n            },\r\n            on: {\r\n               input: (offset: number) => {\r\n                  entry.value = offset;\r\n                  const item = this.$el.querySelector(\"li\") as HTMLElement;\r\n                  const itemSize = item.clientHeight;\r\n                  const current = getCurrent();\r\n                  const actual = part.getter(current);\r\n                  const candidate = offset/itemSize;\r\n                  const newValue = candidate >= actual\r\n                     ? Math.min(actual+1, Math.ceil(candidate))\r\n                     : Math.max(actual-1, Math.floor(candidate));\r\n\r\n                  const clamped = Math.max(0, Math.min(newValue, part.count-1));\r\n                  if(part.getter(current) === clamped)\r\n                     return;\r\n                  const result = new Date(current);\r\n                  part.setter(result, clamped);\r\n                  this.$emit(\"input\", result);\r\n               }\r\n            }\r\n         }, [\r\n            h(\"ul\", { }, range(0, part.count).select(i => h(\"li\", {\r\n               class: value === i ? \"dg-part-selected\" : null,\r\n               on: {\r\n                  click: () => {\r\n                     if(value === i) {\r\n                        this.$emit(\"accept\");\r\n                        return;\r\n                     }\r\n                     const result = new Date(getCurrent());\r\n                     part.setter(result, i);\r\n                     this.$emit(\"input\", result);\r\n                  }\r\n               }\r\n            }, leftPad(\"\"+i, 2, \"0\"))).toList())\r\n         ]);\r\n      };\r\n\r\n      return h(\"div\", {\r\n         class: [\"dg-time-display\", `dg-time-${layout.length}`],\r\n         on: {\r\n            click: (e: Event) => e.stopPropagation()\r\n         }\r\n      }, [\r\n         ...layout.map(i => renderValue(i)),\r\n         h(\"div\", { class: \"dg-select-indicator\" })\r\n      ]);\r\n   },\r\n   components: {\r\n      ScrollPanel\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\nimport * as dt from \"../DateFormat\";\r\nimport CalendarDisplay from \"./CalendarDisplay\";\r\nimport TimeDisplay from \"./TimeDisplay\";\r\n\r\ninterface IThis extends Vue {\r\n   value: Date;\r\n   editValue: string;\r\n   format: string;\r\n   placeholder: string;\r\n   editIndex: number;\r\n   popupValue: Date;\r\n   clickListener: (e: Event) => void;\r\n   popupVisible: boolean;\r\n}\r\n\r\nfunction replacePart(text: string, index: number, value: string) {\r\n   if(index <  0 || index > text.length-value.length)\r\n      throw { message: \"Index out of range\" };\r\n   if(index === 0)\r\n      return value+text.substr(value.length);\r\n   if(index === text.length-value.length)\r\n      return text.substr(0, text.length-value.length)+value;\r\n\r\n   return text.substr(0, index) + value + text.substr(index+value.length);\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"DatePicker\",\r\n   props: {\r\n      value: { default: null },\r\n      format: { type: String },\r\n      placeholder: { type: String }\r\n   },\r\n   data(this: IThis) {\r\n      return {\r\n         editValue: \"\",\r\n         editIndex: null,\r\n         popupValue: this.value ? this.value : dt.today(),\r\n         clickListener: null,\r\n         popupVisible: false,\r\n      };\r\n   },\r\n   mounted(this: IThis) {\r\n      this.editValue = this.value ? dt.formatDate(this.value, this.format) : \"\";\r\n      this.clickListener = (e: Event) => {\r\n         if(e instanceof CustomEvent && e.detail && e.detail.sender === this)\r\n            return;\r\n         this.popupVisible = false;\r\n         e.stopPropagation();\r\n      };\r\n   },\r\n   components: {\r\n      CalendarDisplay,\r\n      TimeDisplay\r\n   },\r\n   watch: {\r\n      popupVisible(this: IThis) {\r\n         if(this.popupVisible) {\r\n            const ev = new CustomEvent(\"dg-date-picker-close\", { detail: { sender: this } });\r\n            document.dispatchEvent(ev);\r\n            document.addEventListener(\"click\", this.clickListener);\r\n            document.addEventListener(\"dg-date-picker-close\", this.clickListener);\r\n         } else {\r\n            document.removeEventListener(\"click\", this.clickListener);\r\n            document.removeEventListener(\"dg-date-picker-close\", this.clickListener);\r\n         }\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n      const textInput = h(\"input\", {\r\n         attrs: {\r\n            type: \"text\",\r\n            placeholder: this.placeholder\r\n         },\r\n         domProps: {\r\n            value: this.editValue,\r\n            selectionStart: this.editIndex,\r\n            selectionEnd: this.editIndex\r\n         },\r\n         on: {\r\n            dgFocus: (e: Event) => {\r\n               e.preventDefault();\r\n               const input = e.target as HTMLInputElement;\r\n               input.focus();\r\n               this.popupVisible = false;\r\n            },\r\n            keydown: (e: KeyboardEvent) => {\r\n               const input = e.target as HTMLInputElement;\r\n               if(e.key === \"Tab\")\r\n                  return true;\r\n               if(e.key === \"c\" && e.ctrlKey)\r\n                  return true;\r\n               if(e.key === \"a\" && e.ctrlKey)\r\n                  return true;\r\n               if((e.key === \"v\" || e.key === \"x\") && e.ctrlKey) {\r\n                  this.$nextTick(() => {\r\n                     const index = this.editIndex;\r\n                     this.editValue = dt.tryParse(input.value, this.format) ? input.value : \"\";\r\n                     this.editIndex = Math.min(index > 0 ? index : this.editValue.length, this.editValue.length);\r\n                  });\r\n                  return true;\r\n               }\r\n               if(!this.popupVisible && e.key === \"Escape\") {\r\n                  this.editValue = \"\";\r\n                  input.blur();\r\n                  e.stopPropagation();\r\n                  return;\r\n               }\r\n               if(e.key === \"Enter\" || e.key === \"Escape\") {\r\n                  this.popupVisible = false;\r\n                  const result = dt.tryParse(this.editValue, this.format);\r\n                  this.$emit(\"input\", result);\r\n                  e.stopPropagation();\r\n                  return;\r\n               }\r\n               if(/^F\\d+$/gm.test(e.key))\r\n                  return true;\r\n\r\n               (() => {\r\n                  const index = this.editIndex ? this.editIndex : 0;\r\n\r\n                  const target = this.editValue\r\n                     ? this.editValue\r\n                     : this.placeholder;\r\n\r\n                  const specialIndex = (() => {\r\n                     if(e.key === \"ArrowRight\" && e.ctrlKey)\r\n                        return dt.nextBounadry(index, this.format);\r\n                     if(e.key === \"ArrowLeft\" && e.ctrlKey)\r\n                        return dt.previousBoundary(index, this.format);\r\n                     if(e.key === \"ArrowLeft\")\r\n                        return Math.max(0, index-1);\r\n                     if(e.key === \"ArrowRight\")\r\n                        return Math.min(index+1, target.length);\r\n                     if(e.key === \"Home\")\r\n                        return 0;\r\n                     if(e.key === \"End\")\r\n                        return target.length;\r\n                     return null;\r\n                  })();\r\n                  if(specialIndex !== null) {\r\n                     this.editIndex = Math.min(specialIndex, this.editValue ? this.editValue.length : 0);\r\n                     return;\r\n                  }\r\n\r\n                  if(e.key === \"Backspace\" && e.ctrlKey) {\r\n                     if(index > 0) {\r\n                        const to = index;\r\n                        const from = dt.previousBoundary(to, this.format);\r\n                        this.editValue = replacePart(target, from, this.placeholder.substr(from, to-from));\r\n                        this.editIndex = from;\r\n                     }\r\n                     return;\r\n                  }\r\n\r\n                  if(e.key === \"Delete\" && e.ctrlKey) {\r\n                     if(index < target.length) {\r\n                        const from = index;\r\n                        const to = dt.nextBounadry(from, this.format);\r\n                        this.editValue = replacePart(target, from, this.placeholder.substr(from, to-from));\r\n                        this.editIndex = from;\r\n                     }\r\n                     return;\r\n                  }\r\n\r\n                  if(e.key === \"Delete\") {\r\n                     if(index >= 0) {\r\n                        this.editValue = replacePart(target, index, this.placeholder[index]);\r\n                        this.editIndex++;\r\n                     }\r\n                     return;\r\n                  }\r\n\r\n                  if(e.key === \"Backspace\") {\r\n                     if(index > 0) {\r\n                        this.editValue = replacePart(target, index-1, this.placeholder[index-1]);\r\n                        this.editIndex = index-1;\r\n                     }\r\n                     return;\r\n                  }\r\n                  if(e.key.length > 1)\r\n                     return;\r\n                  const canBePlaced = dt.isMatching(e.key, index, this.format);\r\n                  const isNumber = e.key >= \"0\" && e.key <= \"9\";\r\n                  if(!canBePlaced && !isNumber)\r\n                     return;\r\n\r\n                  const newIndex = canBePlaced\r\n                     ? index\r\n                     : dt.nearestInputIndex(canBePlaced ? index : index+1, this.format);\r\n                  const nextIndex = dt.nearestInputIndex(newIndex+1, this.format);\r\n                  if(newIndex >= target.length)\r\n                     return;\r\n                  this.editValue = replacePart(target, newIndex, e.key);\r\n                  this.editIndex = nextIndex;\r\n                  const candidate = dt.tryParse(this.editValue, this.format);\r\n                  if(candidate)\r\n                     this.popupValue = candidate;\r\n               })();\r\n\r\n               e.stopPropagation();\r\n               e.preventDefault();\r\n               return false;\r\n            },\r\n            focus: (e: Event) => {\r\n               const input = e.target as HTMLInputElement;\r\n               this.$nextTick(() => this.editIndex = input.selectionStart ? input.selectionStart : 0);\r\n               this.popupVisible = true;\r\n            },\r\n            click: (e: Event) => {\r\n               const input = e.target as HTMLInputElement;\r\n               this.$nextTick(() => this.editIndex = input.selectionStart ? input.selectionStart : 0);\r\n               this.popupVisible = true;\r\n               e.stopPropagation();\r\n               e.preventDefault();\r\n            },\r\n            blur: (e: Event) => {\r\n               const result = dt.tryParse(this.editValue, this.format);\r\n               this.$emit(\"input\", result);\r\n               this.editValue = result ? dt.formatDate(result, this.format) : \"\";\r\n            }\r\n         }\r\n      });\r\n\r\n      return h(\"div\", {\r\n         class: \"dg-date-input\",\r\n         on: {\r\n            click: (e: Event) => {\r\n               const input = e.target as HTMLInputElement;\r\n               this.$nextTick(() => this.editIndex = input.selectionStart ? input.selectionStart : 0);\r\n               this.popupVisible = true;\r\n               e.stopPropagation();\r\n               e.preventDefault();\r\n            }\r\n         }\r\n      }, [\r\n         textInput,\r\n         this.popupVisible\r\n            ? (() => {\r\n                  const tokenKind = dt.positionKind(this.editIndex, this.format);\r\n                  if(tokenKind === null)\r\n                     return null;\r\n                  const isTime = tokenKind === dt.TokenKind.Hour || tokenKind === dt.TokenKind.Minute || tokenKind === dt.TokenKind.Second;\r\n                  if(isTime)\r\n                     return h(\"TimeDisplay\", {\r\n                        props: {\r\n                           value: this.popupValue,\r\n                           format: this.format\r\n                        },\r\n                        on: {\r\n                           input: (value: Date) => {\r\n                              this.popupValue = value;\r\n                              this.$emit(\"input\", this.popupValue);\r\n                              this.editValue = dt.formatDate(this.popupValue, this.format);\r\n                           },\r\n                           accept: () => this.popupVisible = false\r\n                        }\r\n                     });\r\n\r\n                  return h(\"CalendarDisplay\", {\r\n                     props: {\r\n                        value: this.popupValue\r\n                     },\r\n                     on: {\r\n                        input: (value: Date) => {\r\n                           this.popupValue = value;\r\n                           this.$emit(\"input\", this.popupValue);\r\n                           this.editValue = dt.formatDate(this.popupValue, this.format);\r\n                           const input = this.$el.querySelector(\"input[type='text']\") as HTMLInputElement;\r\n                           input.focus();\r\n                           this.popupVisible = false;\r\n                           this.editIndex = this.editValue.length;\r\n                        }\r\n                     }\r\n                  });\r\n               })()\r\n            : null\r\n      ]);\r\n   }\r\n});\r\n","export default function() {\r\n   return {\r\n      inserted(el: HTMLElement) {\r\n         const target = el.tagName.toLowerCase() === \"input\"\r\n            ? el\r\n            : el.querySelector(\"input\");\r\n         if(!target)\r\n            return;\r\n         const ev = new Event(\"dgFocus\", { cancelable: true });\r\n         if(target.dispatchEvent(ev) !== false)\r\n            target.focus();\r\n      }\r\n   };\r\n}\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup, IFilterValue, FilterOperator } from \"../DataSource\";\r\nimport { chain } from '@/linq';\r\nimport { localize, getCalendar } from \"../Config\";\r\nimport DatePicker from \"./DatePicker\";\r\nimport focus from \"./FocusInput\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"DateFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n   },\r\n   components: {\r\n      DatePicker\r\n   },\r\n   directives: {\r\n      focus: focus()\r\n   },\r\n   render(this: IThis, h) {\r\n      const filters = this.value && this.value.length ? this.value : [];\r\n      const fromFilter = filters.find(i => i.tag === \"date-from\");\r\n      const toFilter = filters.find(i => i.tag === \"date-to\");\r\n\r\n      const emitValue = (from: Date | null, to: Date | null) => {\r\n         const newFilters = chain([\r\n            {emit: !!from, value: from, tag: \"date-from\", operator: FilterOperator.GraterThanOrEqual },\r\n            {emit: !!to, value: to, tag: \"date-to\", operator: FilterOperator.LowerThanOrEqual }\r\n         ])\r\n            .where(i => i.emit)\r\n            .select<IFilterGroup>(i => ({\r\n               tag: i.tag,\r\n               filters: [ {\r\n                  value: i.value,\r\n                  operator: i.operator,\r\n                  field: this.fieldName\r\n                  } ]\r\n            }))\r\n            .toList();\r\n         this.$emit(\"input\", newFilters);\r\n      };\r\n\r\n      const calendar = getCalendar();\r\n\r\n      return h(\"div\", { class: \"dg-date-filter\" }, [\r\n         h(\"div\", [\r\n            localize(\"rangeFrom\"),\r\n            h(\"DatePicker\", {\r\n               props: {\r\n                  value: fromFilter ? fromFilter.filters[0].value : null,\r\n                  format: calendar.dateFormat,\r\n                  placeholder: calendar.datePlaceholder\r\n               },\r\n               directives: [\r\n                  { name: \"focus\" }\r\n               ],\r\n               on: {\r\n                  input: (value: Date) => {\r\n                     emitValue(value, (() => {\r\n                        const raw = toFilter ? toFilter.filters[0].value as Date : null;\r\n                        if(!raw)\r\n                           return null;\r\n                        const result = new Date(raw);\r\n                        result.setDate(raw.getDate()+1);\r\n                        return result;\r\n                     })());\r\n                  }\r\n               }\r\n            })\r\n         ],\r\n      ),\r\n      h(\"div\", [\r\n         localize(\"rangeTo\"),\r\n         h(\"DatePicker\", {\r\n            props: {\r\n               value: toFilter ? toFilter.filters[0].value : null,\r\n               format: calendar.dateFormat,\r\n               placeholder: calendar.datePlaceholder\r\n            },\r\n            on: {\r\n               input: (value: Date) => {\r\n                  emitValue(fromFilter ? fromFilter.filters[0].value as Date : null, (() => {\r\n                     if(!value)\r\n                        return null;\r\n                     const result = new Date(value);\r\n                     result.setDate(result.getDate()+1);\r\n                     result.setMilliseconds(-1);\r\n                     return result;\r\n                  })());\r\n               }\r\n            }\r\n         })],\r\n      ) ]);\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup, FilterOperator } from \"../DataSource\";\r\nimport { chain } from '@/linq';\r\nimport { localize, getCalendar } from \"../Config\";\r\nimport DatePicker from \"./DatePicker\";\r\nimport focus from \"./FocusInput\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"DateTimeFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n   },\r\n   components: {\r\n      DatePicker\r\n   },\r\n   directives: {\r\n      focus: focus()\r\n   },\r\n   render(this: IThis, h) {\r\n      const filters = this.value && this.value.length ? this.value : [];\r\n      const fromFilter = filters.find(i => i.tag === \"date-from\");\r\n      const toFilter = filters.find(i => i.tag === \"date-to\");\r\n\r\n      const emitValue = (from: Date | null, to: Date | null) => {\r\n         const newFilters = chain([\r\n            {emit: !!from, value: from, tag: \"date-from\", operator: FilterOperator.GraterThanOrEqual },\r\n            {emit: !!to, value: to, tag: \"date-to\", operator: FilterOperator.LowerThanOrEqual }\r\n         ])\r\n            .where(i => i.emit)\r\n            .select<IFilterGroup>(i => ({\r\n               tag: i.tag,\r\n               filters: [ {\r\n                  value: i.value,\r\n                  operator: i.operator,\r\n                  field: this.fieldName\r\n                  } ]\r\n            }))\r\n            .toList();\r\n         this.$emit(\"input\", newFilters);\r\n      };\r\n\r\n      const calendar = getCalendar();\r\n\r\n      return h(\"div\", { class: \"dg-date-filter\" }, [\r\n         h(\"div\", [\r\n            localize(\"rangeFrom\"),\r\n            h(\"DatePicker\", {\r\n               props: {\r\n                  value: fromFilter ? fromFilter.filters[0].value : null,\r\n                  format: calendar.dateTimeFormat,\r\n                  placeholder: calendar.dateTimePlaceholder\r\n               },\r\n               directives: [\r\n                  { name: \"focus\" }\r\n               ],\r\n               on: {\r\n                  input: (value: Date) => {\r\n                     emitValue(value, toFilter ? toFilter.filters[0].value as Date : null);\r\n                  }\r\n               }\r\n            })\r\n         ],\r\n      ),\r\n      h(\"div\", [\r\n         localize(\"rangeTo\"),\r\n         h(\"DatePicker\", {\r\n            props: {\r\n               value: toFilter ? toFilter.filters[0].value : null,\r\n               format: calendar.dateTimeFormat,\r\n               placeholder: calendar.dateTimePlaceholder\r\n            },\r\n            on: {\r\n               input: (value: Date) => {\r\n                  emitValue(fromFilter ? fromFilter.filters[0].value as Date : null, value);\r\n               }\r\n            }\r\n         })],\r\n      ) ]);\r\n   },\r\n});\r\n","import Vue, { VNode } from \"vue\";\r\nimport { IFilterGroup, IFilterValue, FilterOperator } from \"../DataSource\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport { chain } from '@/linq';\r\nimport { IKeyValuePair } from \"./DataColumn\";\r\nimport { localize } from \"../Config\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n   options: IKeyValuePair[] | number[] | string[];\r\n}\r\n\r\nfunction normalize(raw: IKeyValuePair[] | number[] | string[]): IKeyValuePair[] {\r\n   if(raw.length === 0)\r\n      return [];\r\n   if(typeof raw[0] === \"string\")\r\n      return (raw as string[]).map(i => ({ key: i, value: i }));\r\n   if(typeof raw[0] === \"number\")\r\n      return (raw as number[]).map(i => ({key: \"\"+i, value: \"\"+i }));\r\n   return raw as IKeyValuePair[];\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"ValueListFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n      options: { type: Array, default: () => [] }\r\n   },\r\n   render(this: IThis, h) {\r\n      const filters = this.value && this.value.length ? this.value[0].filters : [];\r\n      const values = filters.length > 0 ? filters[0].value as string[] : [];\r\n      const selected: {[key: string]: boolean} = {};\r\n      values.forEach(i => selected[i] = true);\r\n      const nameLookup: {[key: string]: string} = {};\r\n      const normalized = normalize(this.options);\r\n      normalized.forEach(i => nameLookup[i.key] = i.value);\r\n\r\n      const emitValue = (filterValues: string[]) => {\r\n         const filter: IFilterGroup[] = filterValues.length ? [{\r\n            filters: [{\r\n               field: this.fieldName,\r\n               operator: FilterOperator.In,\r\n               value: filterValues\r\n            }]\r\n         }] : [];\r\n         this.$emit(\"input\", filter);\r\n      };\r\n\r\n      const renderTag = (key: string): VNode => {\r\n         return h(\"li\", [\r\n            nameLookup[key],\r\n            h(\"a\", {\r\n               class: \"dg-remove-value\",\r\n               attrs: { href: \"#\" },\r\n               on: {\r\n                  click: (e: Event) => {\r\n                     e.preventDefault();\r\n                     emitValue(chain(values).where(i => i !== key).toList());\r\n                  }\r\n               }\r\n            }, \"x\")\r\n         ]);\r\n      };\r\n\r\n      const availableOptions = chain(normalized)\r\n         .where(i => !selected[i.key])\r\n         .toList();\r\n\r\n      return h(\"div\", { class: \"dg-value-list\" }, [\r\n         h(\"ul\", values.map(renderTag)),\r\n         h(\"select\", {\r\n            on: {\r\n               change: (e: Event) => {\r\n                  e.stopPropagation();\r\n                  e.preventDefault();\r\n                  const dropDown = e.target as HTMLSelectElement;\r\n                  const newValues = values.slice(0);\r\n                  newValues.push(availableOptions[dropDown.selectedIndex-1].key);\r\n                  emitValue(newValues);\r\n                  setTimeout(() => (e.target as HTMLSelectElement).selectedIndex = 0);\r\n               }\r\n            },\r\n            domProps: {\r\n               selectedIndex: 0\r\n            }\r\n         }, [\r\n            h(\"option\", { class: \"dg-select-placeholder\" }, localize(\"dropdownLabel\")),\r\n            ...availableOptions.map(i => h(\"option\", [i.value]))\r\n         ])\r\n      ]);\r\n   },\r\n   components: {\r\n      Checkbox\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup, FilterOperator } from \"../DataSource\";\r\nimport { chain } from '@/linq';\r\nimport { getSettings, localize } from \"../Config\";\r\nimport NumericInput from \"./NumericInput\";\r\nimport focus from \"./FocusInput\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n   params: INumericFilterParams;\r\n}\r\n\r\nexport interface INumericFilterParams {\r\n   decimal: boolean;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"NumericFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n      params: { },\r\n   },\r\n   components: {\r\n      NumericInput\r\n   },\r\n   directives: {\r\n      focus: focus()\r\n   },\r\n   render(this: IThis, h) {\r\n      const filters = this.value && this.value.length ? this.value : [];\r\n      const fromFilter = filters.find(i => i.tag === \"range-from\");\r\n      const toFilter = filters.find(i => i.tag === \"range-to\");\r\n      const equalsFilter = filters.find(i => i.tag === \"value-equals\");\r\n\r\n      const emitValue = (from: number | null, to: number | null, equals: number | null) => {\r\n         const newFilters = chain([\r\n            {emit: equals === null && !!from, value: from, tag: \"range-from\", operator: FilterOperator.GraterThanOrEqual },\r\n            {emit: equals === null && !!to, value: to, tag: \"range-to\", operator: FilterOperator.LowerThanOrEqual },\r\n            {emit: equals !== null, value: equals, tag: \"value-equals\", operator: FilterOperator.Equals },\r\n         ])\r\n            .where(i => i.emit)\r\n            .select<IFilterGroup>(i => ({\r\n               tag: i.tag,\r\n               filters: [ {\r\n                  value: i.value,\r\n                  operator: i.operator,\r\n                  field: this.fieldName\r\n                  } ]\r\n            }))\r\n            .toList();\r\n         this.$emit(\"input\", newFilters);\r\n      };\r\n\r\n      const settings = getSettings();\r\n\r\n      return h(\"div\", { class: \"dg-numeric-filter\" }, [\r\n         h(\"div\", [\r\n            localize(\"labelValueEquals\"),\r\n            h(\"NumericInput\", {\r\n               props: {\r\n                  value: equalsFilter ? equalsFilter.filters[0].value : null,\r\n                  float: this.params.decimal,\r\n                  separator: settings.decimalSeparator\r\n               },\r\n               directives: [\r\n                  { name: \"focus\" }\r\n               ],\r\n               on: {\r\n                  input: (value: number) => {\r\n                     emitValue(null, null, value);\r\n                  }\r\n               }\r\n            })],\r\n         ),\r\n         h(\"div\", [\r\n            localize(\"rangeFrom\"),\r\n            h(\"NumericInput\", {\r\n               props: {\r\n                  value: fromFilter ? fromFilter.filters[0].value : null,\r\n                  float: this.params.decimal,\r\n                  separator: settings.decimalSeparator\r\n               },\r\n               on: {\r\n                  input: (value: number) => {\r\n                     emitValue(value, toFilter ? toFilter.filters[0].value as number : null, null);\r\n                  }\r\n               }\r\n            })\r\n         ],\r\n      ),\r\n      h(\"div\", [\r\n         localize(\"rangeTo\"),\r\n         h(\"NumericInput\", {\r\n            props: {\r\n               value: toFilter ? toFilter.filters[0].value : null,\r\n               float: this.params.decimal,\r\n               separator: settings.decimalSeparator\r\n            },\r\n            on: {\r\n               input: (value: number) => {\r\n                  emitValue(fromFilter ? fromFilter.filters[0].value as number : null, value, null);\r\n               }\r\n            }\r\n         })],\r\n      ) ]);\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup, FilterOperator } from \"../DataSource\";\r\nimport { localize, ILang } from \"../Config\";\r\nimport focus from \"./FocusInput\";\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   fieldName: string;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"TextFilter\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n   },\r\n   directives: {\r\n      focus: focus()\r\n   },\r\n   render(this: IThis, h) {\r\n      const filter = this.value && this.value.length ? this.value[0].filters : null;\r\n      const filterValue = filter ? filter[0].value : null;\r\n      const filterOperator = (filter ? filter[0].operator : null) ?? FilterOperator.Contains;\r\n\r\n      const emitValue = (value: string, operator: FilterOperator) =>\r\n         this.$emit(\"input\", [{ filters: [{ field:this.fieldName, operator, value }] }]);\r\n\r\n      const options: {key: keyof ILang; operator: FilterOperator}[] = [\r\n         { key: \"containsValue\", operator: FilterOperator.Contains },\r\n         { key: \"valueEqual\", operator: FilterOperator.Equals },\r\n         { key: \"valueNotEqual\", operator: FilterOperator.NotEqals },\r\n         { key: \"startsWithValue\", operator: FilterOperator.StartsWith },\r\n         { key: \"endsWithValue\", operator: FilterOperator.EndsWith },\r\n      ];\r\n\r\n      return h(\"div\", { }, [\r\n         h(\"select\", {\r\n            on: {\r\n               change: (e:Event) => {\r\n                  const dropDown = e.target as HTMLSelectElement;\r\n                  emitValue(filterValue, options[dropDown.selectedIndex].operator);\r\n               }\r\n            },\r\n            domProps: {\r\n               selectedIndex: options.findIndex(i => i.operator === filterOperator)\r\n            }\r\n         }, options.map(i => h(\"option\", localize(i.key)))),\r\n         h(\"input\", {\r\n            domProps: {\r\n               value: filterValue,\r\n            },\r\n            attrs: {\r\n               type: \"text\",\r\n            },\r\n            directives: [\r\n               { name: \"focus\" }\r\n            ],\r\n            on: {\r\n               input: (e: Event) => emitValue((e.target as HTMLInputElement).value, filterOperator)\r\n            }\r\n         })\r\n      ]);\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\nimport { IFilterGroup } from \"../DataSource\";\r\nimport BoolFilter from \"./BoolFilter\";\r\nimport DateFilter from \"./DateFilter\";\r\nimport DateTimeFilter from \"./DateTimeFilter\";\r\nimport ValueListFilter from \"./ValueListFilter\";\r\nimport NumericFilter from \"./NumericFilter\";\r\nimport TextFilter from \"./TextFilter\";\r\nimport { localize } from '@/Config';\r\n\r\ninterface IThis extends Vue {\r\n   value: IFilterGroup[];\r\n   opened: boolean;\r\n   filterComponent: string;\r\n   filterOptions: any;\r\n   filterParams: any;\r\n   fieldName: string;\r\n   workingValue: IFilterGroup[];\r\n   mouseDownListener: () => void;\r\n   keyListener: (e: KeyboardEvent) => void;\r\n   closeListener: (e: Event) => void;\r\n   bindEvents: () => void;\r\n   unbindEvents: () => void;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"FilterPopup\",\r\n   props: {\r\n      value: { type: Array, default: () => [] },\r\n      fieldName: { type: String },\r\n      filterComponent: { type: String },\r\n      filterOptions: { },\r\n      filterParams: { },\r\n   },\r\n   mounted(this: IThis) {\r\n      this.mouseDownListener = () => {\r\n         this.opened = false;\r\n      };\r\n      this.closeListener = (e: Event) => {\r\n         if(e instanceof CustomEvent && e.detail && e.detail.sender === this)\r\n            return;\r\n         this.opened = false;\r\n         e.stopPropagation();\r\n      };\r\n      this.keyListener = (e: KeyboardEvent) => {\r\n         if(e.key === \"Enter\") {\r\n            this.opened = false;\r\n            this.$emit(\"input\", this.workingValue);\r\n            e.stopPropagation();\r\n         }\r\n         if(e.key === \"Escape\") {\r\n            this.opened = false;\r\n            e.stopPropagation();\r\n         }\r\n      };\r\n      if(this.opened)\r\n         this.bindEvents();\r\n   },\r\n   beforeDestroy(this: IThis) {\r\n      this.unbindEvents();\r\n   },\r\n   data() {\r\n      return {\r\n         opened: false,\r\n         workingValue: [],\r\n      };\r\n   },\r\n   methods: {\r\n      bindEvents(this: IThis) {\r\n         document.addEventListener(\"mousedown\", this.mouseDownListener);\r\n         document.addEventListener(\"keydown\", this.keyListener);\r\n         document.addEventListener(\"dg-filter-popup-close\", this.closeListener);\r\n      },\r\n      unbindEvents(this: IThis) {\r\n         document.removeEventListener(\"mousedown\", this.mouseDownListener);\r\n         document.removeEventListener(\"keydown\", this.keyListener);\r\n         document.removeEventListener(\"dg-filter-popup-close\", this.closeListener);\r\n      }\r\n   },\r\n   watch: {\r\n      opened(this: IThis) {\r\n         if(this.opened)\r\n            this.bindEvents();\r\n         else\r\n            this.unbindEvents();\r\n         if(!this.opened)\r\n            return;\r\n         const ev = new CustomEvent(\"dg-filter-popup-close\", { detail: { sender: this } });\r\n         document.dispatchEvent(ev);\r\n      }\r\n   },\r\n   render(this: IThis, h) {\r\n      return h(\"div\", {\r\n         class: \"dg-column-filter\",\r\n         attrs: {\r\n            \"data-opened\": this.opened,\r\n            \"data-has-value\": this.value && this.value.length > 0\r\n         }\r\n      }, [\r\n         h(\"a\", {\r\n            class: \"dg-popup-link\",\r\n            attrs: { href: \"#\" },\r\n            on: {\r\n               click: (e: Event) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  this.workingValue = this.value;\r\n                  this.opened = !this.opened;\r\n               },\r\n               mousedown: (e: Event) => e.stopPropagation()\r\n            }\r\n         }, \"▼\"),\r\n         this.opened ? h(\"div\", {\r\n            class: \"dg-filter-popup\",\r\n            on: {\r\n               click: (e: Event) => {\r\n                  e.stopPropagation();\r\n                  document.dispatchEvent(new Event(\"dg-date-picker-close\"));\r\n               },\r\n               mousedown: (e: Event) => {\r\n                  e.stopPropagation();\r\n               }\r\n            },\r\n            directives: [\r\n               { name: \"adjustSide\" }\r\n            ]\r\n         }, [\r\n            h(\"div\", { attrs: { \"data-component\": this.filterComponent }, }, [\r\n               h(\"form\", {\r\n                  on: {\r\n                     submit: (e: Event) => {\r\n                        e.preventDefault();\r\n                        this.$emit(\"input\", this.workingValue);\r\n                        this.opened = false;\r\n                     }\r\n                  }\r\n               }, [\r\n                     h(this.filterComponent, {\r\n                     props: {\r\n                        value: this.workingValue,\r\n                        options: this.filterOptions,\r\n                        params: this.filterParams,\r\n                        fieldName: this.fieldName\r\n                     },\r\n                     on: {\r\n                        input: (value: IFilterGroup[]) => this.workingValue = value\r\n                     }\r\n                  }),\r\n                  h(\"input\", {\r\n                     domProps: { type: \"submit\" },\r\n                     style: { display: \"none\" }\r\n                  })\r\n               ])\r\n            ]),\r\n            h(\"div\", { class: \"dg-popup-actions\" }, [\r\n               h(\"a\", {\r\n                  attrs: { href: \"#\" },\r\n                  on: {\r\n                     click: (e: Event) => {\r\n                        e.preventDefault();\r\n                        this.$emit(\"input\", this.workingValue);\r\n                        this.opened = false;\r\n                     }\r\n                  }\r\n               }, localize(\"filterAccept\")),\r\n               h(\"a\", {\r\n                  attrs: { href: \"#\" },\r\n                  on: {\r\n                     click: (e: Event) => {\r\n                        e.preventDefault();\r\n                        this.$emit(\"input\", []);\r\n                        this.opened = false;\r\n                     }\r\n                  }\r\n               }, localize(\"filterReset\"))\r\n            ])\r\n         ]) : null\r\n      ]);\r\n   },\r\n   directives: {\r\n      adjustSide: {\r\n         inserted(el: HTMLElement) {\r\n            const minOffset = el.clientWidth*1.25;\r\n            const box = el.getBoundingClientRect();\r\n            el.classList.add(window.innerWidth-box.left > minOffset ? \"dg-side-left\" : \"dg-side-right\");\r\n         }\r\n      }\r\n   },\r\n   components: {\r\n      BoolFilter,\r\n      DateFilter,\r\n      NumericFilter,\r\n      DateTimeFilter,\r\n      TextFilter,\r\n      ValueListFilter\r\n   },\r\n});\r\n","import Vue from \"vue\";\r\n\r\ninterface IThis extends Vue {\r\n   value: boolean | undefined;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"TriCheckbox\",\r\n   props: {\r\n      value: { type: Boolean, default: false },\r\n   },\r\n   render(this: IThis, h) {\r\n      return h(\"input\", {\r\n         attrs: {\r\n            type: \"checkbox\",\r\n            checked: !!this.value,\r\n         },\r\n         domProps: {\r\n            indeterminate: this.value === null,\r\n            checked: !!this.value,\r\n         },\r\n         on: {\r\n            input: (e: Event) => this.$emit(\"input\", (e.target as HTMLInputElement).checked),\r\n            click: (e: Event) => {\r\n               const target = e.target as HTMLInputElement;\r\n               e.preventDefault();\r\n               e.stopPropagation();\r\n               const value = this.value === null ? false : !this.value;\r\n               //values must be outside the callback itself. Otherwise values will not be applied to an html element\r\n               setTimeout(() => {\r\n                  target.checked = value;\r\n                  target.indeterminate = false;\r\n               });\r\n               this.$emit(\"input\", value);\r\n               return false;\r\n            }\r\n         }\r\n      });\r\n   },\r\n});\r\n","import * as ds from \"./DataSource\";\r\nimport { range, chain } from './linq';\r\n\r\n//sorting data can be provided as sigle string representing column name\r\nexport function normalizeSorting(candidate: any): ds.ISortField[] {\r\n   function normalizeField(field: any): ds.ISortField {\r\n      if(typeof field === \"string\")\r\n         return {field, direction: ds.SortDirection.Asc};\r\n      return {\r\n         field: field.field,\r\n         direction: field.direction ? field.direction : ds.SortDirection.Asc\r\n      };\r\n   }\r\n\r\n   return Array.isArray(candidate)\r\n      ? candidate.map(normalizeField)\r\n      : [normalizeField(candidate)];\r\n}\r\n\r\nfunction withCheck<T>(first: T[], second: T[], check: () => boolean) {\r\n   if(first ? !second : second) //a xor b: one is null and other one is not\r\n      return false;\r\n   if(!first && !second)\r\n      return true;\r\n   if(first.length !== second.length)\r\n      return false;\r\n   return check();\r\n}\r\n\r\nexport function isSortingEqual(first: ds.ISortField[], second: ds.ISortField[]) {\r\n   return withCheck(first, second, () => range(0, first.length)\r\n      .all(index => first[index].direction === second[index].direction && first[index].field === second[index].field));\r\n}\r\n\r\nfunction areFilterValuesEqual(first: ds.IFilterValue[], second: ds.IFilterValue[]) {\r\n   return withCheck(first, second, () => chain(first)\r\n      .zip(second, (a,b) => a.field === b.field && a.operator === b.operator && a.value === b.value)\r\n      .all(i => i));\r\n}\r\n\r\nfunction areFilterGroupsEqual(first: ds.IFilterGroup[], second: ds.IFilterGroup[]) {\r\n   return withCheck(first, second, () => chain(first)\r\n      .zip(second, (a,b) => areFilterValuesEqual(a.filters, b.filters))\r\n      .all(i => i));\r\n}\r\n\r\nexport function areFiltersEqual(first: ds.IColumnFilter[], second: ds.IColumnFilter[]) {\r\n   return withCheck(first, second, () => {\r\n      const firstLookup: {[key: string]: ds.IFilterGroup[]} = {};\r\n      first.forEach(i => firstLookup[i.field] = i.groups);\r\n      return chain(second).all(i => areFilterGroupsEqual(firstLookup[i.field], i.groups));\r\n   });\r\n}\r\n","import Vue from \"vue\";\r\nexport const FilterField = \"FilterField\";\r\nimport { IFilterValue, FilterOperator } from \"../DataSource\";\r\nimport { IListener } from \"./Interfaces\";\r\n\r\nexport interface IDataFilter {\r\n   getValue: () => IFilterValue;\r\n}\r\n\r\ninterface IThis extends Vue {\r\n   field: string;\r\n   value: any;\r\n   operator: FilterOperator;\r\n   notifyParent: () => void;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: FilterField,\r\n   props: {\r\n      field: { type: String },\r\n      operator: { type: String, default: FilterOperator.Equals },\r\n      value: { default: null }\r\n   },\r\n   methods: {\r\n      getValue(this: IThis): IFilterValue {\r\n         return {\r\n            field: this.field,\r\n            value: this.value,\r\n            operator: this.operator\r\n         };\r\n      },\r\n      notifyParent(this: IThis) {\r\n         const handler = (this.$parent as any as IListener).onValueSignaled;\r\n         if(handler)\r\n            handler();\r\n      }\r\n   },\r\n   mounted(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   beforeDestroy(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   watch: {\r\n      field: \"notifyParent\",\r\n      value: \"notifyParent\",\r\n   },\r\n   render(this: Vue, h) {\r\n      return h(\"div\");\r\n   }\r\n});\r\n","import Vue,{ VNode, VNodeComponentOptions, VNodeData, CreateElement } from \"vue\";\r\nimport { cast } from \"./Grid\";\r\nimport { IDataColumn, DataColumn, IKeyValuePair } from \"./DataColumn\";\r\nimport { getFormatter, getFilterComponent, getSettings } from \"../Config\";\r\nimport buildSource, * as ds from \"../DataSource\";\r\nimport { chain } from '@/linq';\r\nimport \"./DataGrid.less\";\r\nimport Pager from \"./Pager\";\r\nimport PageList from \"./PageList\";\r\nimport FilterPopup from \"./FilterPopup\";\r\nimport TriCheckbox from \"./TriCheckbox\";\r\nimport * as n from \"../Normalization\";\r\nimport { IListener } from \"./Interfaces\";\r\nimport { IDataGroup, FilterGroup } from \"./FilterGroup\";\r\nimport { IDataFilter, FilterField } from \"./FilterField\";\r\nimport { GroupField, IGroupField } from \"./GroupField\";\r\n\r\nfunction logError(message: string) {\r\n   if(!Vue.config.silent)\r\n      console.error(message);\r\n}\r\n\r\ninterface IMethods extends IListener {\r\n   switchPage: (page: number, forceReload?: boolean, initialLoad?: boolean) => void;\r\n   updateSelection: (item: any) => void;\r\n   resetSelection: () => void;\r\n   selectAll: () => void;\r\n   fetchSource: () => void;\r\n   findColumns: () => IDataColumn[];\r\n   bindReload: (eventName: string | null) => void;\r\n   findGrouping: () => ds.ISortField[];\r\n}\r\n\r\ninterface IData {\r\n   vPage: number; //v prefix for \"volatile\" local state. Prefixes such as _ and $ are reserved by Vue itself.\r\n   vDataSource: ds.IDataSource;\r\n   vFetchId: number;\r\n   vPageData: any[];\r\n   vSorting: ds.ISortField[];\r\n   vTotal: number;\r\n   vColumnFilters: ds.IColumnFilter[];\r\n   vSelectedIds: any[];\r\n   vExpanded: {[id: string]: boolean };\r\n   vIsLoading: boolean;\r\n   vReloadHandler: { name: string, handler: () => void } | null;\r\n   vUri: string | null;\r\n   vPageUri: string | null;\r\n}\r\n\r\nenum SelectionMode {\r\n   None = \"none\",\r\n   Single = \"single\",\r\n   Multi = \"multi\",\r\n}\r\n\r\ninterface IThis extends Vue, IMethods, IData {\r\n   page: number;\r\n   pageSize: number;\r\n   source: any;\r\n   type: any;\r\n   sorting: ds.ISortField[];\r\n   sortable: boolean;\r\n   pageable: boolean;\r\n   canReload: boolean;\r\n   filterable: boolean;\r\n   theme: string;\r\n   columnFilters: ds.IColumnFilter[];\r\n   filters: Array<ds.IFilterGroup | ds.IFilterValue> | ds.IFilterValue | ds.IFilterGroup;\r\n   detailsTemplate: string | ((item: any, h: CreateElement) => string | VNode);\r\n   noDataTemplate: string | ((h: CreateElement) => string | VNode);\r\n   sourceArgs: any | null;\r\n   rowClass: (item: any) => string | string[];\r\n   reloadEvent: string;\r\n   idField: string;\r\n   selectedIds: any[];\r\n   selected: any[];\r\n   selectionMode: SelectionMode;\r\n   checkboxes: boolean;\r\n   keepSelection: boolean;\r\n   fieldInfos: ds.IFieldInfo[];\r\n   groupTemplate: string | ((item: any, h: CreateElement) => string | VNode);\r\n}\r\n\r\nfunction buildSourceOrDefault(source: any, sourceType: any) {\r\n   return buildSource(source, sourceType ? sourceType : getSettings().defaultRemoteSource);\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: \"DataGrid\",\r\n   data() {\r\n      const self = this as any as IThis;\r\n      return cast<IData>({\r\n         vPage: 0,\r\n         vFetchId: 0,\r\n         vDataSource: buildSourceOrDefault(self.source, self.type),\r\n         vPageData: [],\r\n         vSorting: self.sorting ? n.normalizeSorting(self.sorting) : [],\r\n         vTotal: 0,\r\n         vColumnFilters: self.columnFilters ? self.columnFilters : [],\r\n         vSelectedIds: self.selectedIds ? self.selectedIds : [],\r\n         vExpanded: {},\r\n         vIsLoading: false,\r\n         vReloadHandler: null,\r\n         vUri: null,\r\n         vPageUri: null\r\n      });\r\n   },\r\n   mounted(this: IThis) {\r\n      if(this.selectionMode === SelectionMode.None) {\r\n         this.resetSelection();\r\n      }\r\n      if(!Array.isArray(this.vSorting) || this.vSorting.length === 0) {\r\n         this.vSorting = this.findColumns()\r\n            .filter(i => i.sortOrder !== null && i.sortOrder !== undefined && i.field)\r\n            .sort((a,b) => (a.sortOrder as number) - (b.sortOrder as number))\r\n            .map(i => ({\r\n               field: i.field as string,\r\n               direction: i.sortDir === \"desc\" ? ds.SortDirection.Desc : ds.SortDirection.Asc\r\n            }));\r\n         this.$emit(\"update:sorting\", this.vSorting);\r\n      }\r\n      this.switchPage(this.page, true, true);\r\n      this.bindReload(this.reloadEvent);\r\n   },\r\n   beforeDestroy(this: IThis) {\r\n      this.bindReload(null);\r\n   },\r\n   watch: {\r\n      page(this: IThis) {\r\n         this.switchPage(this.page);\r\n      },\r\n      reloadEvent(this: IThis) {\r\n         this.bindReload(this.reloadEvent);\r\n      },\r\n      filters(this: IThis) {\r\n         this.switchPage(this.page);\r\n      },\r\n      sourceArgs(this: IThis) {\r\n         this.switchPage(0, true);\r\n      },\r\n      pageSize(this: IThis, newValue: number, oldValue: number) {\r\n         const index = oldValue*this.vPage;\r\n         this.switchPage(Math.floor(index/newValue), true);\r\n      },\r\n      source(this: IThis) {\r\n         this.vDataSource = buildSourceOrDefault(this.source, this.type);\r\n      },\r\n      soureOptions(this: IThis) {\r\n         this.vDataSource = buildSourceOrDefault(this.source, this.type);\r\n      },\r\n      selectionMode(this: IThis) {\r\n         if(this.selectionMode === SelectionMode.None) {\r\n            this.resetSelection();\r\n         }\r\n         if(this.selectionMode === SelectionMode.Single && this.vSelectedIds.length > 1) {\r\n            this.vSelectedIds = [this.vSelectedIds[0]];\r\n            this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n            this.$emit(\"update:selected\", this.selected ? [this.selected[0]] : []);\r\n         }\r\n      },\r\n      selectedIds(this: IThis) {\r\n         if(!this.selectedIds) {\r\n            this.vSelectedIds = [];\r\n            return;\r\n         }\r\n         if(this.vSelectedIds.length !== this.selectedIds.length || !chain(this.vSelectedIds).zip(this.selectedIds, (a,b) => a === b).any(i => !i))\r\n            this.vSelectedIds = this.selectedIds;\r\n      },\r\n      vDataSource(this: IThis) {\r\n         this.switchPage(0, true);\r\n      },\r\n      vColumnFilters(this: IThis, newValue: ds.IColumnFilter[], oldValue: ds.IColumnFilter[]) {\r\n         if(!n.areFiltersEqual(newValue, oldValue))\r\n            this.switchPage(0, true);\r\n      },\r\n      columnFilters(this: IThis) {\r\n         this.vColumnFilters = this.columnFilters;\r\n      },\r\n      sorting(this: IThis) {\r\n         const candidate = n.normalizeSorting(this.sorting);\r\n         if(!n.isSortingEqual(this.vSorting, candidate))\r\n            this.vSorting = candidate;\r\n      },\r\n      vSorting(this: IThis) {\r\n         this.fetchSource();\r\n      }\r\n   },\r\n   props: {\r\n     page: { type: Number, default: 0 },\r\n     pageSize: { type: Number, default: 10 },\r\n     reloadEvent: { type: String, default: \"grid:reload\" },\r\n     source: { default: null },\r\n     type: { default: null },\r\n     sourceArgs: { default: null },\r\n     isLoading: { type: Boolean, default: false },\r\n     idField: { type: String, default: () => getSettings().idField },\r\n     sorting: { type: Array, default: () => [] },\r\n     selectedIds: { type: Array, default: () => [] },\r\n     selected: { type: Array, default: () => [] },\r\n     selectionMode: { type: String, default: SelectionMode.None },\r\n     sortable: { type: Boolean, default: true },\r\n     pageable: { type: Boolean, default: true },\r\n     filterable: { type: Boolean, default: true },\r\n     keepSelection: { type: Boolean, default: false },\r\n     checkboxes: { type: Boolean, default: true },\r\n     canReload: { type: Boolean, default: true },\r\n     uri: { type: String, default: null },\r\n     pageUri: { type: String, default: null },\r\n     rowClass: { type: Function },\r\n     filters: {},\r\n     columnFilters: {},\r\n     detailsTemplate: { default: null },\r\n     noDataTemplate: { default: null },\r\n     fieldInfos: { type: Array, default: null },\r\n     theme: { type: String, default: \"dg-light\" },\r\n     groupTemplate: { default: null }\r\n   },\r\n   methods: cast<IMethods>({\r\n      switchPage(this: IThis, page, forceReload, initialLoad?) {\r\n         if (this.vPage === page && !forceReload)\r\n            return;\r\n         if(!initialLoad && !this.keepSelection)\r\n            this.resetSelection();\r\n         this.vPage = page;\r\n         this.$emit(\"update:page\", page);\r\n         this.fetchSource();\r\n      },\r\n      bindReload(this: IThis, name: string | null) {\r\n         const context = this.$root;\r\n         if(!context)\r\n            return;\r\n         if(this.vReloadHandler != null)\r\n            context.$off(this.vReloadHandler.name, this.vReloadHandler.handler);\r\n         if(!name)\r\n            return;\r\n\r\n         this.vReloadHandler = {\r\n            name,\r\n            handler: () => this.switchPage(this.vPage, true)\r\n         };\r\n         context.$on(name, this.vReloadHandler.handler);\r\n      },\r\n      onValueSignaled(this: IThis) {\r\n         //caled when data group filters have changed\r\n         this.switchPage(0, true);\r\n      },\r\n      selectAll(this: IThis) {\r\n         if(!this.keepSelection) {\r\n            this.vSelectedIds = this.vPageData.map(i => i[this.idField]);\r\n            this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n            this.$emit(\"update:selected\", this.vPageData);\r\n            return;\r\n         }\r\n\r\n         const selected: {[key: string]: boolean} = {};\r\n         this.vSelectedIds.forEach(i => {\r\n            selected[\"\"+i] = true;\r\n         });\r\n         const toAdd = this.vPageData.filter(i => !selected[i[this.idField]]);\r\n         this.vSelectedIds = this.vSelectedIds.slice().concat(toAdd.map(i => i[this.idField]));\r\n         this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n         this.$emit(\"update:selected\", this.selected ? this.selected.slice().concat(toAdd) : toAdd);\r\n      },\r\n      findColumns(this: IThis) {\r\n         const nodes = this.$slots.default;\r\n         if(nodes === undefined)\r\n            return [];\r\n         return chain(nodes)\r\n            .where(i => i.tag !== undefined && i.tag.endsWith(DataColumn))\r\n            .select(i => i.componentOptions && i.componentOptions.propsData ? i.componentOptions.propsData : null)\r\n            .where(i => i !== null)\r\n            .cast<IDataColumn>()\r\n            .toList();\r\n      },\r\n      findGrouping(this: IThis) {\r\n         const nodes = this.$slots.default;\r\n         if(nodes === undefined)\r\n            return [];\r\n         return chain(nodes)\r\n            .where(i => i.tag !== undefined && i.tag.endsWith(GroupField))\r\n            .select(i => i.componentOptions && i.componentOptions.propsData ? i.componentOptions.propsData : null)\r\n            .where(i => i !== null)\r\n            .cast<IGroupField>()\r\n            .orderBy(i => i.order)\r\n            .select<ds.ISortField>(i => ({ field: i.field, direction: i.direction ? i.direction : ds.SortDirection.Asc }))\r\n            .toList();\r\n      },\r\n      updateSelection(this: IThis, item: any) {\r\n         const id = item[this.idField];\r\n         if(id === undefined) {\r\n            logError(`Data item does not have ${this.idField} property specified as id.`);\r\n            return;\r\n         }\r\n         if(this.vSelectedIds.findIndex(i => i === id) >= 0) {\r\n            //deselect\r\n            this.vSelectedIds = this.vSelectedIds.filter(i => i !== id);\r\n            this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n            this.$emit(\"update:selected\", this.selected ? this.selected.filter(i => i[this.idField] !== id) : []);\r\n            return;\r\n         }\r\n\r\n         if(this.selectionMode === SelectionMode.Single) {\r\n            this.vSelectedIds = [id];\r\n            this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n            this.$emit(\"update:selected\", [item]);\r\n            return;\r\n         }\r\n         if(this.selectionMode === SelectionMode.Multi) {\r\n            this.vSelectedIds = this.vSelectedIds.slice().concat([id]);\r\n            this.$emit(\"update:selectedIds\", this.vSelectedIds);\r\n            this.$emit(\"update:selected\", this.selected ? this.selected.slice().concat([item]) : [item]);\r\n            return;\r\n         }\r\n\r\n         logError(`Unknown selection mode selected: ${this.selectionMode}.`);\r\n      },\r\n      resetSelection(this: IThis) {\r\n         this.vSelectedIds = [];\r\n         this.$emit(\"update:selectedIds\", []);\r\n         this.$emit(\"update:selected\", []);\r\n      },\r\n      fetchSource(this: IThis) {\r\n         this.vFetchId++;\r\n         const fetchId = this.vFetchId;\r\n         this.$emit(\"update:isLoading\", true);\r\n         this.vIsLoading = true;\r\n\r\n         this.$nextTick(() => {\r\n            if(fetchId !== this.vFetchId)\r\n               return;\r\n\r\n            const externalFilters = () => {\r\n               if(!this.filters)\r\n                  return [];\r\n\r\n               function normalize(value: ds.IFilterValue | ds.IFilterGroup): ds.IFilterGroup {\r\n                  if(\"filters\" in value)\r\n                     return value;\r\n                  return {\r\n                     filters: [ value ]\r\n                  };\r\n               }\r\n               return Array.isArray(this.filters)\r\n                  ? this.filters.map(normalize)\r\n                  : [ normalize(this.filters) ];\r\n            };\r\n\r\n            const dataGroups = chain(this.$children)\r\n               .where(i => i.$options.name === FilterGroup)\r\n               .cast<IDataGroup>()\r\n               .select(i => i.getValue())\r\n               .where(i => i.filters.length > 0)\r\n               .toList();\r\n\r\n            const dataFilters = chain(this.$children)\r\n               .where(i => i.$options.name === FilterField)\r\n               .cast<IDataFilter>()\r\n               .select(i => ({ filters: [i.getValue()] }))\r\n               .toList();\r\n\r\n            const infos = chain(Array.isArray(this.fieldInfos) ? this.fieldInfos : [] as ds.IFieldInfo[])\r\n               .select(i => ({ field: i.field, dataType: i.dataType }))\r\n               .where(i => !!i.field)\r\n               .toList();\r\n            const lookup: {[key: string]: boolean} = {};\r\n            infos.forEach(i => lookup[i.field] = true);\r\n\r\n            this.findColumns()\r\n               .filter(i => i.field && !lookup[i.field])\r\n               .forEach(i => infos.push({\r\n                  dataType: i.type,\r\n                  field: i.field as string\r\n               }));\r\n\r\n            const request: ds.IDataRequest = {\r\n               sorting: (() => {\r\n                  const grouping = this.findGrouping();\r\n                  const groupLookup: {[key: string]: boolean} = {};\r\n                  grouping.forEach(i => groupLookup[i.field] = true);\r\n                  const sortLookup: {[key: string]: ds.ISortField} = {};\r\n                  this.vSorting.forEach(i => sortLookup[i.field] = i);\r\n\r\n                  const groupingPart = grouping.map(i => {\r\n                     const existing = sortLookup[i.field];\r\n                     return existing ? existing : i;\r\n                  });\r\n                  const sortingPart = this.vSorting.filter(i => !groupLookup[i.field]);\r\n\r\n                  return [...groupingPart, ...sortingPart];\r\n               })(),\r\n               page: this.pageable ? this.vPage : null,\r\n               pageSize: this.pageable ? this.pageSize : null,\r\n               filters: chain(this.vColumnFilters)\r\n                  .selectMany(i => i.groups)\r\n                  .concat(dataGroups)\r\n                  .concat(dataFilters)\r\n                  .concat(externalFilters())\r\n                  .toList(),\r\n               fields: infos,\r\n               args: this.sourceArgs\r\n            };\r\n            const source = this.vDataSource.load(request);\r\n            new ds.DataPromise(source.resolver)\r\n               .always(() => {\r\n                  if(fetchId !== this.vFetchId)\r\n                     return;\r\n                  this.$emit(\"update:isLoading\", false);\r\n                  this.vExpanded = {};\r\n                  this.vIsLoading = false;\r\n               })\r\n               .error((error) => {\r\n                   logError(`Unable to load grid page. Data source error: ${error}.`)\r\n                   this.vPageData = [];\r\n                   this.$emit(\"update:uri\", null);\r\n                   this.$emit(\"update:pageUri\", null);\r\n                   this.vUri = null;\r\n                   this.vPageUri = null;\r\n                   this.vTotal = 0;\r\n               })\r\n               .success((data, total, uri, pageUri) => {\r\n                  if(fetchId !== this.vFetchId)\r\n                     return;\r\n                  this.vExpanded = {};\r\n                  this.vPageData = data;\r\n                  this.vTotal = total;\r\n                  this.$emit(\"update:uri\", uri);\r\n                  this.$emit(\"update:pageUri\", pageUri);\r\n                  this.vUri = uri;\r\n                  this.vPageUri = pageUri;\r\n               })\r\n               .fetch();\r\n         });\r\n      }\r\n   }),\r\n   render(this: IThis, h) {\r\n      const hasDetails = !!this.detailsTemplate;\r\n      const findColumns = () => this.findColumns()\r\n         .map(i => {\r\n            function buildLookup() {\r\n               if(!i.values)\r\n                  return null;\r\n               if(!Array.isArray(i.values))\r\n                  return null;\r\n               if(i.values.length === 0)\r\n                  return null;\r\n               if(typeof i.values[0] === \"string\" || typeof i.values[0] === \"number\")\r\n                  return null;\r\n               const lookup: {[key: string]: string} = {};\r\n               (i.values as IKeyValuePair[]).forEach(j => lookup[j.key] = j.value);\r\n               return lookup;\r\n            }\r\n            return {\r\n               definition: i,\r\n               values: buildLookup()\r\n            } as IColumnBinding;\r\n         });\r\n\r\n      const sorting: {[key: string]: ds.SortDirection} = {};\r\n      this.vSorting.forEach(i => sorting[i.field] = i.direction ? i.direction : ds.SortDirection.Asc);\r\n\r\n      const columnFilters: {[key: string]: ds.IFilterGroup[]} = {};\r\n      this.vColumnFilters.forEach(i => columnFilters[i.field] = i.groups);\r\n\r\n      interface IColumnBinding {\r\n         definition: IDataColumn;\r\n         values: {[key: string]: string} | null;\r\n      }\r\n\r\n      function findFilter(dataType: string | undefined, value: string | boolean | undefined) {\r\n         if(!value)\r\n            return null;\r\n         if(value === true) {\r\n            const component = getFilterComponent(dataType);\r\n            return component != null ? {filter: component.component, params: component.params, options: null } : null;\r\n         }\r\n         return {filter: value, options: null, params: null };\r\n      }\r\n\r\n      const hasCheckboxes = this.selectionMode === SelectionMode.Multi && this.checkboxes;\r\n      const columns = findColumns();\r\n      const headerCells = columns.map(data => {\r\n         const column = data.definition;\r\n         const headTpl = column.headTemplate ? this.$scopedSlots[column.headTemplate] : null;\r\n         const title = headTpl ? headTpl(column) : column.title ? column.title : column.field;\r\n         const canSort = this.sortable && (column.sortable || column.sortable === undefined) && column.field;\r\n         const columnSorting = column.field ? sorting[column.field] : null;\r\n         const filterValue = column.filter === undefined ? true : column.filter;\r\n         const filterComponent = this.filterable && filterValue\r\n            ? (column.values ? {filter: \"ValueListFilter\", options: column.values as any, params: null } : findFilter(column.type, filterValue))\r\n            : null;\r\n         const content = [\r\n            title,\r\n            h(\"span\",{ class: \"sort-direction\" }, columnSorting ? (columnSorting === \"asc\" ? \"↑\" : \"↓\") : \"\"),\r\n            filterComponent && column.field ? h(\"FilterPopup\", {\r\n               props: {\r\n                  value: columnFilters[column.field],\r\n                  fieldName: column.field,\r\n                  filterComponent: filterComponent ? filterComponent.filter : null,\r\n                  filterParams: filterComponent ? filterComponent.params : null,\r\n                  filterOptions: filterComponent ? filterComponent.options : null\r\n               },\r\n               on: {\r\n                  input: (value: ds.IFilterGroup[]) => {\r\n                     const newFilters = chain(this.vColumnFilters).where(i => i.field !== column.field).toList();\r\n                     if(value.length > 0)\r\n                        newFilters.push({\r\n                           field: column.field as string,\r\n                           groups: value\r\n                        });\r\n                     this.$emit(\"update:columnFilters\", newFilters);\r\n                     this.vColumnFilters = newFilters;\r\n                  }\r\n               }\r\n            }) : null\r\n         ];\r\n         if(column.icon)\r\n            content.splice(0, 0, h(\"i\", { class: column.icon, attrs: { \"aria-hidden\": true } }));\r\n\r\n         return h(\"th\", {\r\n            class: canSort ? \"can-sort\" : null,\r\n            on: {\r\n               click: (e: Event) => {\r\n                  if(!canSort || !column.field)\r\n                     return;\r\n                  e.preventDefault();\r\n                  function cycleSorting(current?: ds.SortDirection) {\r\n                     //asc -> desc -> null\r\n                     if(current === ds.SortDirection.Asc)\r\n                        return ds.SortDirection.Desc;\r\n                     if(current === ds.SortDirection.Desc)\r\n                        return null;\r\n                     return ds.SortDirection.Asc;\r\n                  }\r\n                  const entry = this.vSorting.find(i => i.field === column.field);\r\n                  const newDirection = cycleSorting(entry ? entry.direction : undefined);\r\n                  this.vSorting = newDirection\r\n                     ? [{field: column.field, direction: newDirection}]\r\n                     : [];\r\n                  this.$emit(\"update:sorting\", this.vSorting);\r\n               }\r\n            }\r\n            }, content);\r\n      });\r\n\r\n      const selected: {[key: string]: boolean} = {};\r\n      this.vSelectedIds.forEach(i => {\r\n         selected[\"\"+i] = true;\r\n      });\r\n\r\n      if(hasDetails)\r\n         headerCells.splice(0, 0, h(\"th\", { class: \"dg-details\" }));\r\n\r\n      if(hasCheckboxes)\r\n         headerCells.splice(0, 0, h(\"th\", { class: \"dg-selector\" }, [\r\n            h(\"TriCheckbox\", {\r\n               props: {\r\n                  value: this.vSelectedIds.length === 0\r\n                     ? false\r\n                     : (this.keepSelection ? this.vTotal : this.vPageData.length) === this.vSelectedIds.length && chain(this.vPageData).all(i => selected[i[this.idField]])\r\n                        ? true\r\n                        : null\r\n               },\r\n               on: {\r\n                  input: (value: boolean) => {\r\n                     if(value)\r\n                        this.selectAll();\r\n                     else\r\n                        this.resetSelection();\r\n                  }\r\n               }\r\n            })\r\n         ]));\r\n\r\n      const renderCell = (data: any, binding: IColumnBinding) => {\r\n         const column = binding.definition;\r\n         const buildContent = () => {\r\n            if(column.render) {\r\n               return column.render(column.field ? data[column.field] : null, data, h);\r\n            }\r\n            if(!column.template) {\r\n               if(!column.field) {\r\n                  logError(\"Data column has no field and no template defined. It will be always empty.\");\r\n                  return \"\";\r\n               }\r\n               const rawValue = data[column.field];\r\n               if(binding.values) {\r\n                  const match = binding.values[\"\"+rawValue];\r\n                  return match !== undefined ? match : \"\"+rawValue;\r\n               }\r\n               return getFormatter(column.type)(rawValue, column.formatOptions !== undefined ? column.formatOptions : null, h, data);\r\n            }\r\n\r\n            const buildFromScope = (scopeName: string) => {\r\n               const tpl = this.$scopedSlots[scopeName];\r\n               if(!tpl) {\r\n                  logError(`Unable to find scoped slot named '${scopeName}' defined as template for grid data column.`);\r\n                  return \"\";\r\n               }\r\n               return tpl({row: data, value: column.field ? data[column.field] : null});\r\n            };\r\n\r\n            if(typeof column.template === \"string\")\r\n               return buildFromScope(column.template);\r\n\r\n            const result = column.template(column.field ? data[column.field] : null, data, h);\r\n            if(typeof result === \"string\")\r\n               return buildFromScope(result);\r\n            return result;\r\n         };\r\n         return h(\"td\", [buildContent()]);\r\n      };\r\n\r\n      const renderRow = (data: any) => {\r\n         const cells = columns.map(i => renderCell(data, i));\r\n         if(hasDetails)\r\n            cells.splice(0, 0, h(\"td\", { class: \"dg-details\" }, [\r\n               h(\"a\", {\r\n                  attrs: {\r\n                     href: \"#\",\r\n                     class: this.vExpanded[data[this.idField]] ? \"dg-expanded\" : null\r\n                  },\r\n                  on: {\r\n                     click: (e: Event) => {\r\n                        e.preventDefault();\r\n                        this.vExpanded[data[this.idField]] = !this.vExpanded[data[this.idField]];\r\n                        this.$forceUpdate();\r\n                     }\r\n                  }\r\n               }, '▲')\r\n            ]));\r\n\r\n         if(hasCheckboxes)\r\n            cells.splice(0, 0, h(\"td\", { class: \"dg-selector\" }, [\r\n               h(\"TriCheckbox\", {\r\n                  props: { value: !!selected[data[this.idField]] },\r\n                  on: {\r\n                     input: () => this.updateSelection(data)\r\n                  }\r\n               })\r\n            ]));\r\n\r\n         const classes = [\"dg-data-row\", selected[data[this.idField]] ? \"dg-selected\" : null];\r\n         if(this.rowClass) {\r\n            const additional = this.rowClass(data);\r\n            if(Array.isArray(additional))\r\n               classes.push(...additional);\r\n            if(typeof additional === \"string\")\r\n               classes.push(additional);\r\n         }\r\n\r\n         const rows = [h(\"tr\", {\r\n            class: classes.length > 0 ? classes : undefined,\r\n            on: {\r\n               click: (e: Event) => {\r\n                  if(this.selectionMode === SelectionMode.None)\r\n                     return;\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  this.updateSelection(data);\r\n               }\r\n            }\r\n          }, cells)];\r\n\r\n         if(this.vExpanded[data[this.idField]]) {\r\n            const buildScoped = (scopeName: string) => {\r\n               const scope = this.$scopedSlots[scopeName];\r\n               if(!scope) {\r\n                  logError(`Unable to find scoped slot named '${this.detailsTemplate}' for details row.`);\r\n                  return null;\r\n               }\r\n               return scope({item: data});\r\n            };\r\n            const buildDetails = () => {\r\n               if(typeof this.detailsTemplate !== \"string\") {\r\n                  const detailsResult = this.detailsTemplate(data, h);\r\n                  return typeof detailsResult === \"string\"\r\n                     ? buildScoped(detailsResult)\r\n                     : detailsResult;\r\n               }\r\n               return buildScoped(this.detailsTemplate);\r\n            };\r\n            rows.push(h(\"tr\", {\r\n               class: \"dg-details-row\"\r\n            }, [ h(\"td\", { attrs: { colspan: cells.length } }, [buildDetails()]) ]));\r\n         }\r\n\r\n         return rows;\r\n      };\r\n\r\n      const renderGroupRow = (keyValues: any[], grouping: string[]) => {\r\n         const dataItem: any = {};\r\n         for(let a=0;a<grouping.length;a++)\r\n            dataItem[grouping[a]] = keyValues[a];\r\n\r\n         const buildContent = () => {\r\n            if(!this.groupTemplate)\r\n               return keyValues.join(\", \");\r\n            if(typeof this.groupTemplate === \"string\") {\r\n               const tpl = this.$scopedSlots[this.groupTemplate];\r\n               if(!tpl) {\r\n                  logError(`Unable to find scoped slot named '${this.groupTemplate}' defined as template for grid data group.`);\r\n                  return keyValues.join(\", \");\r\n               }\r\n               return tpl({ group: dataItem });\r\n            }\r\n            return this.groupTemplate(dataItem, h);\r\n         };\r\n\r\n         return h(\"tr\", {\r\n            class: \"dg-grouping-row\"\r\n         }, [ h(\"td\", { attrs: { colspan: columns.length+(hasCheckboxes ? 1 : 0) } }, [buildContent()]) ]);\r\n      };\r\n\r\n      const cols = columns.map(i => h(\"col\", { style: { width: i.definition.width ? i.definition.width : undefined } }));\r\n      if(hasDetails)\r\n         cols.unshift(h(\"col\", { style: { width: \"5px\" } }));\r\n      if(hasCheckboxes)\r\n         cols.unshift(h(\"col\", { class: \"dg-col-checkboxes\" }));\r\n      const thead = h(\"thead\", {class: \"dg-head\"}, [h(\"tr\", {}, headerCells)]);\r\n      const dataRows = (() => {\r\n         const grouping = this.findGrouping();\r\n         const pageData = chain(this.vPageData);\r\n         return grouping.length === 0\r\n            ? pageData.selectMany(renderRow).toList()\r\n            : pageData\r\n               .groupSorted(item => grouping.map(i => item[i.field]))\r\n               .selectMany(i => [renderGroupRow(i.key, grouping.map(j => j.field)), ...i.values.map(renderRow).flat() ])\r\n               .toList();\r\n      })();\r\n      const tbody = h(\"tbody\", { class: \"dg-body\" }, dataRows);\r\n      const dataTable = h(\"table\", { class: \"dg-table\" }, [h(\"colgroup\", {}, cols), thead, tbody]);\r\n      const noDataPlaceholder = (() => {\r\n         if(!this.noDataTemplate)\r\n            return null;\r\n         if(typeof this.noDataTemplate !== \"string\") {\r\n            const result = this.noDataTemplate(h);\r\n            return typeof result === \"string\" ? this.$slots[result] : result;\r\n         }\r\n         return this.$slots[this.noDataTemplate];\r\n      })();\r\n      const hasData = dataRows.length > 0;\r\n\r\n      const slot = h(\"div\", { class: \"dg-hidden\" }, this.$slots.default ? this.$slots.default : []);\r\n      const pager = h(\"pager\", {\r\n         props: {\r\n            value: this.vPage,\r\n            pageSize: this.pageSize,\r\n            total: this.vTotal\r\n         },\r\n         on: {\r\n            input: (page: number) => {\r\n               this.switchPage(page);\r\n               this.$emit(\"update:page\", page);\r\n            }\r\n         }\r\n      });\r\n\r\n      const pageList = h(\"page-list\", {\r\n         props: {\r\n            value: this.vPage,\r\n            pageSize: this.pageSize,\r\n            total: this.vTotal\r\n         },\r\n         on: {\r\n            input: (page: number) => {\r\n               this.switchPage(page);\r\n               this.$emit(\"update:page\", page);\r\n            }\r\n         }\r\n      });\r\n      const reloadLink = h(\"a\", {\r\n         class: \"dg-reload\",\r\n         attrs: { href: \"#\" },\r\n         on: {\r\n            click: (e: Event) => {\r\n               e.preventDefault();\r\n               this.switchPage(this.vPage, true);\r\n            }\r\n         }\r\n      }, [h(\"i\", { class: \"icon-arrows-cw\" })]);\r\n      return h(\"div\", {\r\n         class: [\"dg-grid\", this.theme, this.vIsLoading ? \"dg-loading\" : null, hasData ? \"dg-has-data\" : \"dg-no-data\"]\r\n      }, [\r\n         slot,\r\n         dataTable,\r\n         !hasData ? noDataPlaceholder : null,\r\n         this.pageable ? h(\"div\", { class: \"dg-footer\"}, [this.canReload ? reloadLink : null, pageList, pager, ...(this.$slots.footer ?? [])]) : null,\r\n         this.vIsLoading ? h(\"div\", { class: \"dg-loader\"}) : null,\r\n      ]);\r\n   },\r\n   components: {\r\n      Pager,\r\n      PageList,\r\n      FilterPopup,\r\n      TriCheckbox\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\nexport const FilterGroup = \"FilterGroup\";\r\nimport { IFilterGroup } from \"../DataSource\";\r\nimport { IListener } from \"./Interfaces\";\r\nimport { IDataFilter, FilterField } from \"./FilterField\";\r\nimport { chain } from \"../linq\";\r\n\r\nexport interface IDataGroup {\r\n   getValue: () => IFilterGroup;\r\n}\r\n\r\ninterface IThis extends Vue, IDataGroup {\r\n   notifyParent: () => void;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: FilterGroup,\r\n   methods: {\r\n      getValue(this: Vue): IFilterGroup {\r\n         return {\r\n            filters: chain(this.$children)\r\n               .where(i => i.$options.name === FilterField)\r\n               .cast<IDataFilter>()\r\n               .select(i => i.getValue())\r\n               .toList()\r\n         };\r\n      },\r\n      onValueSignaled() {\r\n         this.notifyParent();\r\n      },\r\n      notifyParent(this: IThis) {\r\n         const handler = (this.$parent as any as IListener).onValueSignaled;\r\n         if(handler)\r\n            handler();\r\n      }\r\n   },\r\n   beforeDestroy(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   mounted(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   render(this: Vue, h) {\r\n      return h(\"div\", this.$slots.default);\r\n   }\r\n});\r\n","import Vue from \"vue\";\r\nexport const GroupField = \"GroupField\";\r\nimport { IListener } from \"./Interfaces\";\r\nimport { SortDirection } from \"../DataSource\";\r\n\r\nexport interface IGroupField {\r\n   order: number;\r\n   field: string;\r\n   direction: SortDirection;\r\n}\r\n\r\ninterface IThis extends Vue {\r\n   notifyParent: () => void;\r\n}\r\n\r\nexport default Vue.extend({\r\n   name: GroupField,\r\n   props: {\r\n      field: { type: String },\r\n      order: { type: Number },\r\n      direction: { type: String, default: SortDirection.Asc },\r\n   },\r\n   methods: {\r\n      notifyParent(this: IThis) {\r\n         const handler = (this.$parent as any as IListener).onValueSignaled;\r\n         if(handler)\r\n            handler();\r\n      }\r\n   },\r\n   mounted(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   beforeDestroy(this: IThis) {\r\n      this.notifyParent();\r\n   },\r\n   watch: {\r\n      field: \"notifyParent\",\r\n      order: \"notifyParent\",\r\n      direction: \"notifyParent\",\r\n   },\r\n   render(this: Vue, h) {\r\n      return h(\"div\");\r\n   }\r\n});\r\n","import { IDataRequest, FilterOperator, operatorOrDefault, SortDirection, IUrlSet, IDataPage, IFieldInfo } from \"./DataSource\";\r\nimport { formatDate } from \"./DateFormat\";\r\n\r\nfunction findFilter(operator: FilterOperator) {\r\n   if(operator === FilterOperator.Equals)\r\n      return \"eq\";\r\n   if(operator === FilterOperator.GraterThanOrEqual)\r\n      return \"ge\";\r\n   if(operator === FilterOperator.GreaterThan)\r\n      return \"gt\";\r\n   if(operator === FilterOperator.LowerThan)\r\n      return \"lt\";\r\n   if(operator === FilterOperator.LowerThanOrEqual)\r\n      return \"le\";\r\n   throw {message: `Unknown odata filter type: ${operator}` };\r\n}\r\n\r\nfunction mapDirection(direction: SortDirection) {\r\n   if(direction === SortDirection.Asc)\r\n      return \"asc\";\r\n   if(direction === SortDirection.Desc)\r\n      return \"desc\";\r\n   throw {message: `Unknown odata sort direction: ${direction}` };\r\n}\r\n\r\nexport function mapData(version: ODataVersion, result: any): IDataPage {\r\n   const paramName = version === ODataVersion.Version3\r\n      ? \"odata.count\"\r\n      : \"@odata.count\";\r\n\r\n   return {\r\n      items: result.value,\r\n      total: parseInt(result[paramName], 10)\r\n   };\r\n}\r\n\r\ninterface IArgs {\r\n   vars: Array<{name: string, value: string | null }>;\r\n}\r\n\r\nexport enum ODataVersion {\r\n   Version3 = 3,\r\n   Version4 = 4\r\n}\r\n\r\nfunction formatValueV3(fieldInfo: IFieldInfo | undefined, value: any) {\r\n   if(value instanceof Date)\r\n      return `DateTime'${formatDate(value, \"YYYY-MM-DDTHH:mm:ss\")}'`;\r\n   if(typeof value === \"boolean\")\r\n      return value ? \"true\" : \"false\";\r\n   if(typeof value !== \"number\")\r\n      return `'${value}'`;\r\n   if(fieldInfo && fieldInfo.dataType === \"decimal\")\r\n      return value+\"m\";\r\n   return value;\r\n}\r\n\r\nfunction formatValueV4(fieldInfo: IFieldInfo | undefined, value: any) {\r\n   if(value instanceof Date)\r\n      return `${formatDate(value, \"YYYY-MM-DDTHH:mm:ssz\")}`;\r\n   if(typeof value === \"boolean\")\r\n      return value ? \"true\" : \"false\";\r\n   if(typeof value !== \"number\")\r\n      return `'${value}'`;\r\n   if(fieldInfo && fieldInfo.dataType === \"decimal\")\r\n      return value+\"m\";\r\n   return value;\r\n}\r\n\r\nexport function buildUrl(version: ODataVersion, url: string, request: IDataRequest): IUrlSet {\r\n   const filterGroups = request.filters.map(group => group.filters.map((filter): string | null => {\r\n      const operator = operatorOrDefault(filter.operator);\r\n      const fieldInfo = request.fields.find(i => i.field === filter.field);\r\n\r\n      const formatValue = version === ODataVersion.Version3\r\n         ? formatValueV3\r\n         : formatValueV4;\r\n\r\n      if(operator === FilterOperator.NotEqals)\r\n         return `not(${filter.field} eq ${formatValue(fieldInfo, filter.value)})`;\r\n      if(operator === FilterOperator.Contains)\r\n         return version === ODataVersion.Version3\r\n            ?  `substringof(${formatValue(fieldInfo, filter.value)}, ${filter.field})`\r\n            :  `contains(${filter.field}, ${formatValue(fieldInfo, filter.value)})`;\r\n      if(operator === FilterOperator.StartsWith)\r\n         return `startswith(${filter.field}, ${formatValue(fieldInfo, filter.value)})`;\r\n      if(operator === FilterOperator.EndsWith)\r\n         return `endswith(${filter.field}, ${formatValue(fieldInfo, filter.value)})`;\r\n      if(operator === FilterOperator.In) {\r\n         if(!filter.value || filter.value.length === 0)\r\n            return null;\r\n         const clauses = filter.value.map((i: any) => `(${filter.field} eq ${formatValue(fieldInfo, i)})`).join(\" or \");\r\n         return filter.value.length > 1 ? `(${clauses})` : clauses;\r\n      }\r\n      return `${filter.field} ${findFilter(operator)} ${formatValue(fieldInfo, filter.value)}`;\r\n   }).filter(i => !!i).join(\" and \"));\r\n\r\n   const filters = filterGroups.length > 1\r\n      ? filterGroups.map(i => `(${i})`).join(\" and \")\r\n      : filterGroups.length > 0 ? filterGroups[0] : null;\r\n\r\n   const sort = request.sorting.length > 0\r\n      ? request.sorting.map(i => `${i.field} ${mapDirection(i.direction)}`).join(\", \")\r\n      : null;\r\n\r\n   const customVars = (() => {\r\n      if(!request.args)\r\n         return [];\r\n      const typed = request.args as IArgs;\r\n      if(!Array.isArray(typed.vars))\r\n         return [];\r\n      return typed.vars;\r\n   })();\r\n   const vars = [\r\n      {name: \"$filter\", value: filters },\r\n      {name: \"$orderby\", value: sort },\r\n      ...customVars\r\n   ].filter(i => i.value !== null).map(i => `${i.name}=${i.value}`).join(\"&\");\r\n\r\n   const dataUrl = `${url}?${vars}`;\r\n   const joinSymbol = vars ? \"&\" : \"\";\r\n   const countParam = version === ODataVersion.Version3\r\n      ? {name: \"$inlinecount\", value: \"allpages\" }\r\n      : {name: \"$count\", value: \"true\" };\r\n\r\n   const pageVars = [\r\n      {name: \"$top\", value: request.pageSize },\r\n      {name: \"$skip\", value: request.pageSize !== null && request.page !== null ? request.page * request.pageSize : null },\r\n      countParam\r\n   ].filter(i => i.value !== null).map(i => `${i.name}=${i.value}`).join(\"&\");\r\n\r\n   return {\r\n      dataUrl,\r\n      pageUrl: `${dataUrl}${joinSymbol}${pageVars}`\r\n   };\r\n}\r\n","import { IDataRequest, FilterOperator, operatorOrDefault, SortDirection, IUrlSet, IDataPage } from \"./DataSource\";\r\nimport { formatDate } from \"./DateFormat\";\r\n\r\nfunction findFilter(operator: FilterOperator) {\r\n   if(operator === FilterOperator.Equals)\r\n      return \"eq\";\r\n   if(operator === FilterOperator.GraterThanOrEqual)\r\n      return \"gte\";\r\n   if(operator === FilterOperator.GreaterThan)\r\n      return \"gt\";\r\n   if(operator === FilterOperator.LowerThan)\r\n      return \"lt\";\r\n   if(operator === FilterOperator.LowerThanOrEqual)\r\n      return \"lte\";\r\n   if(operator === FilterOperator.Contains)\r\n      return \"contains\";\r\n   if(operator === FilterOperator.NotEqals)\r\n      return \"neq\";\r\n   if(operator === FilterOperator.StartsWith)\r\n      return \"startswith\";\r\n   if(operator === FilterOperator.EndsWith)\r\n         return \"endswith\";\r\n   throw {message: `Unknown odata filter type: ${operator}` };\r\n}\r\n\r\nfunction mapDirection(direction: SortDirection) {\r\n   if(direction === SortDirection.Asc)\r\n      return \"asc\";\r\n   if(direction === SortDirection.Desc)\r\n      return \"desc\";\r\n   throw {message: `Unknown odata sort direction: ${direction}` };\r\n   }\r\n\r\nexport function mapData(result: any): IDataPage {\r\n   return {\r\n      items: result.Data,\r\n      total: result.Total\r\n   };\r\n}\r\n\r\nexport function buildUrl(url: string, request: IDataRequest): IUrlSet {\r\n   const filterGroups = request.filters.map(group => group.filters.map((filter): string | null => {\r\n      const operator = operatorOrDefault(filter.operator);\r\n\r\n      function formatValue(value: any) {\r\n         if(value instanceof Date)\r\n            return `datetime'${formatDate(value, \"YYYY-MM-DDTHH-mm-ss\")}'`;\r\n         if(typeof value !== \"number\")\r\n            return `'${value}'`;\r\n         return value;\r\n      }\r\n      if(operator === FilterOperator.In) {\r\n         if(!filter.value || filter.value.length === 0)\r\n            return null;\r\n         const clauses = filter.value.map((i: any) => `(${filter.field}~eq~${formatValue(i)})`).join(\"~or~\");\r\n         return filter.value.length > 1 ? `(${clauses})` : clauses;\r\n      }\r\n      return `${filter.field}~${findFilter(operator)}~${formatValue(filter.value)}`;\r\n   }).filter(i => i !== null).join(\"~and~\"));\r\n\r\n   const filters = filterGroups.length > 1\r\n      ? filterGroups.map(i => `(${i})`).join(\"~and~\")\r\n      : filterGroups.length > 0 ? filterGroups[0] : null;\r\n\r\n   const sort = request.sorting.map(i => `${i.field}-${mapDirection(i.direction)}`).join(\"~\");\r\n\r\n   const vars = [\r\n      {name: \"filter\", value: filters },\r\n      {name: \"sort\", value: sort },\r\n   ].filter(i => i.value).map(i => `${i.name}=${i.value}`).join(\"&\");\r\n\r\n   const dataUrl = `${url}?${vars}`;\r\n   const joinSymbol = vars ? \"&\" : \"\";\r\n   const page = (request.page !== null ? request.page : 0)+1;\r\n   const pageSize = request.pageSize !== null ? request.pageSize : 1000;\r\n\r\n   return {\r\n      dataUrl,\r\n      pageUrl: `${dataUrl}${joinSymbol}pageSize=${pageSize}&page=${page}`\r\n   };\r\n}\r\n","import { ICalendar, ISettingsArgs, ILang } from \"../Config\";\r\n\r\nconst calendar: ICalendar = {\r\n   dateFormat: \"YYYY-MM-DD\",\r\n   datePlaceholder: \"yyyy-mm-dd\",\r\n   timeFormat: \"HH:mm\",\r\n   timePlaceholder: \"hh:mm\",\r\n   dateTimeFormat: \"YYYY-MM-DD HH:mm\",\r\n   dateTimePlaceholder: \"yyyy-mm-dd hh:mm\",\r\n   dayNames: [\r\n      \"N\",\r\n      \"Pn\",\r\n      \"Wt\",\r\n      \"Śr\",\r\n      \"Czw\",\r\n      \"Pt\",\r\n      \"So\",\r\n   ],\r\n   monthNamesFull: [\"Styczeń\", \"Luty\", \"Marzec\", \"Kwiecień\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpień\", \"Wrzesień\", \"Październik\", \"Listopad\", \"Grudzień\"],\r\n   monthNamesShort: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Paź\", \"Lis\", \"Gru\"],\r\n   weekStart: 1,\r\n   yearFormat: \"{year}\",\r\n   yearRangeFormat: \"{from} - {to}\",\r\n   monthFormat: \"{month}\",\r\n   monthFirst: true\r\n};\r\n\r\nconst settings: ISettingsArgs = {\r\n   thousandSeparator: \" \",\r\n   decimalPrecision: 2,\r\n   decimalSeparator: \",\"\r\n};\r\n\r\nconst text: ILang = {\r\n   yes: \"Tak\",\r\n   no: \"Nie\",\r\n   pagerPage: \"Strona\",\r\n   pagerOfPages: \"z\",\r\n   firstPage: \"Pierwsza strona\",\r\n   previousPage: \"Poprzednia strona\",\r\n   nextPage: \"Następna strona\",\r\n   lastPage: \"Ostatnia strona\",\r\n   pageListItemTitle: \"Strona %page%\",\r\n   filterAccept: \"OK\",\r\n   filterReset: \"Usuń\",\r\n   dropdownLabel: \"Wybierz...\",\r\n   rangeFrom: \"Od:\",\r\n   rangeTo: \"Do:\",\r\n   containsValue: \"Zawiera\",\r\n   startsWithValue: \"Zaczyna się od\",\r\n   endsWithValue: \"Kończy się na\",\r\n   valueNotEqual: \"Nie równa się\",\r\n   valueEqual: \"Równa się\",\r\n   labelValueEquals: \"Równa się:\"\r\n};\r\n\r\nconst lang = {\r\n   settings,\r\n   text,\r\n   calendar\r\n};\r\n\r\nexport default lang;\r\n","import { ICalendar, ISettingsArgs, ILang } from \"../Config\";\r\n\r\nconst calendar: ICalendar = {\r\n   dateFormat: \"DD-MM-YYYY\",\r\n   datePlaceholder: \"dd-mm-yyyy\",\r\n   timeFormat: \"HH:mm\",\r\n   timePlaceholder: \"hh:mm\",\r\n   dateTimeFormat: \"DD-MM-YYYY HH:mm\",\r\n   dateTimePlaceholder: \"dd-mm-yyyy hh:mm\",\r\n   dayNames: [\r\n      \"D\",\r\n      \"S\",\r\n      \"T\",\r\n      \"Q\",\r\n      \"Q\",\r\n      \"S\",\r\n      \"S\",\r\n   ],\r\n   monthNamesFull: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n   monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n   weekStart: 1,\r\n   yearFormat: \"{year}\",\r\n   yearRangeFormat: \"{from} - {to}\",\r\n   monthFormat: \"{month}\",\r\n   monthFirst: true\r\n};\r\n\r\nconst settings: ISettingsArgs = {\r\n   thousandSeparator: \" \",\r\n   decimalPrecision: 2,\r\n   decimalSeparator: \",\"\r\n};\r\n\r\nconst text: ILang = {\r\n   yes: \"Sim\",\r\n   no: \"Não\",\r\n   pagerPage: \"Por pagina\",\r\n   pagerOfPages: \"de\",\r\n   firstPage: \"Primeiro\",\r\n   previousPage: \"Anterior\",\r\n   nextPage: \"Proxima\",\r\n   lastPage: \"Ultima\",\r\n   pageListItemTitle: \"Página %page%\",\r\n   filterAccept: \"OK\",\r\n   filterReset: \"Limpar\",\r\n   dropdownLabel: \"Escolha...\",\r\n   rangeFrom: \"De:\",\r\n   rangeTo: \"Até:\",\r\n   containsValue: \"Cotém\",\r\n   startsWithValue: \"Começa com\",\r\n   endsWithValue: \"Termina com\",\r\n   valueNotEqual: \"Diferente\",\r\n   valueEqual: \"Igual\",\r\n   labelValueEquals: \"É igual a:\"\r\n};\r\n\r\nconst lang = {\r\n   settings,\r\n   text,\r\n   calendar\r\n};\r\n\r\nexport default lang;\r\n","import { VueConstructor } from \"vue\";\r\nimport DataGrid from \"./components/DataGrid\";\r\nimport DataColumn from \"./components/DataColumn\";\r\nimport FilterGroup from \"./components/FilterGroup\";\r\nimport FilterField from \"./components/FilterField\";\r\nimport GroupField from \"./components/GroupField\";\r\nimport { addType, setLanguage, setFilterComponent, setCalendar, setSettings, setLocale } from \"./Config\";\r\nimport { addSource, addRemoteSource, addXhrHook } from \"./DataSource\";\r\nimport * as odata from \"./OData\";\r\nimport * as kendo from \"./KendoMvc\";\r\nimport plPL from \"./i18n/pl-PL\";\r\nimport ptBR from \"./i18n/pt-BR\";\r\n\r\nconst locales = {\r\n   plPL,\r\n   ptBR\r\n};\r\n\r\nconst components: {[key: string]: VueConstructor} = {\r\n   DataGrid,\r\n   DataColumn,\r\n   FilterGroup,\r\n   FilterField,\r\n   GroupField\r\n};\r\n\r\nconst plugin = {\r\n   install(vue: VueConstructor) {\r\n      Object.keys(components).forEach(i => vue.component(i, components[i]));\r\n   },\r\n   addType,\r\n   addSource,\r\n   addRemoteSource,\r\n   addXhrHook,\r\n   setCalendar,\r\n   setSettings,\r\n   setFilterComponent,\r\n   setLanguage,\r\n   setLocale,\r\n   locales\r\n};\r\n\r\naddRemoteSource(\"odata3\", (url, request) => odata.buildUrl(3, url, request), result => odata.mapData(3, result));\r\naddRemoteSource(\"odata4\", (url, request) => odata.buildUrl(4, url, request), result => odata.mapData(4, result));\r\naddRemoteSource(\"odata\", (url, request) => odata.buildUrl(4, url, request), result => odata.mapData(4, result));\r\naddRemoteSource(\"kendo-mvc\", kendo.buildUrl, kendo.mapData);\r\n\r\nexport default plugin;\r\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}